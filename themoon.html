<!DOCTYPE html>
<!--[if lte IE 8]><html class="lt-ie9"><![endif]-->
<!--[if gt IE 8]><!--><html><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>themoon</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!--
Made in Twine 1.4.2 (running on Windows 7)
Built on 16 Dec 2014 at 11:53:55, -0600

Sugarcane is based on:

TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

Published under a BSD open source license

Copyright (c) Osmosoft Limited 2005

Redistribution and use in source and binary forms, with or without modification,
are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this
list of conditions and the following disclaimer in the documentation and/or other
materials provided with the distribution.

Neither the name of the Osmosoft Limited nor the names of its contributors may be
used to endorse or promote products derived from this software without specific
prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
DAMAGE.
-->
<script title="engine">
(function(){

function clone(a){var constructor,b,proto;if(!a||typeof a!="object"){return a
}constructor=a.constructor;if(constructor==Date||constructor==RegExp){b=new constructor(a)}else{if(constructor==Array){b=[]}else{if(a.nodeType&&typeof a.cloneNode=="function"){b=a.cloneNode(true)}else{proto=(typeof Object.getPrototypeOf=="function"?Object.getPrototypeOf(a):a.__proto__);b=proto?Object.create(proto):{}}}}for(var property in a){if(Object.prototype.hasOwnProperty.call(a,property)&&!isCyclic(a[property])){if(typeof a[property]=="object"){try{b[property]=clone(a[property]);continue}catch(e){}}b[property]=a[property]}}return b}function isCyclic(obj){var properties=[];return(function recurse(obj){var key,i,ownProps=[];if(obj&&typeof obj=="object"){if(properties.indexOf(obj)>-1){return true
}properties.push(obj);for(key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)&&recurse(obj[key])){return true
}}}return false}(obj))}function insertElement(a,d,f,c,e){var b=document.createElement(d);if(f){b.id=f}if(c){b.className=c}if(e){insertText(b,e)}if(a){a.appendChild(b)}return b}function addClickHandler(el,fn){if(el.addEventListener){el.addEventListener("click",fn)}else{if(el.attachEvent){el.attachEvent("onclick",fn)}}}function insertText(a,b){return a.appendChild(document.createTextNode(b))}function removeChildren(a){while(a.hasChildNodes()){a.removeChild(a.firstChild)}}function findPassageParent(el){while(el&&el!=document.body&&!~el.className.indexOf("passage")){el=el.parentNode}return el==document.body?null:el}function setPageElement(c,b,a){var place;if(place=(typeof c=="string"?document.getElementById(c):c)){removeChildren(place);if(tale.has(b)){new Wikifier(place,tale.get(b).processText())}else{new Wikifier(place,a)}}}var scrollWindowInterval;function scrollWindowTo(e,margin){var d=window.scrollY?window.scrollY:document.documentElement.scrollTop,m=window.innerHeight?window.innerHeight:document.documentElement.clientHeight,g=k(e),j=(d>g)?-1:1,b=0,c=Math.abs(d-g);scrollWindowInterval&&window.clearInterval(scrollWindowInterval);if(c){scrollWindowInterval=window.setInterval(h,25)}function h(){b+=0.1;window.scrollTo(0,d+j*(c*Math.easeInOut(b)));if(b>=1){window.clearInterval(scrollWindowInterval)}}function k(o){var p=a(o),h=o.offsetHeight,n=d+m;p=Math.min(Math.max(p+(margin||0)*(p<d?-1:1),0),n);if(p<d){return p
}else{if(p+h>n){if(h<m){return(p-(m-h)+20)}else{return p
}}else{return p
}}}function a(l){var m=0;while(l.offsetParent){m+=l.offsetTop;l=l.offsetParent}return m}}function delta(old,neu){var vars,ret={};if(old&&neu){for(vars in neu){if(neu[vars]!==old[vars]){ret[vars]=neu[vars]}}}return ret}function decompile(val){var i,ret;if((typeof val!="object"&&typeof val!="function")||!val){return val
}else{if(val instanceof Passage){return{"[[Passage]]":val.id}}else{if(Array.isArray(val)){ret=[]}else{ret={}}}}for(i in val){if(Object.prototype.hasOwnProperty.call(val,i)&&!isCyclic(val[i])){ret[i]=decompile(val[i])}}if(typeof val=="function"||val instanceof RegExp){try{internalEval(val+"");ret["[[Call]]"]=val+""}catch(e){ret["[[Call]]"]="function(){}"}}return ret}function recompile(val){var i,ret=val;if(val&&typeof val=="object"){if(typeof val["[[Passage]]"]=="number"){return tale.get(val["[[Passage]]"])}if(typeof val["[[Call]]"]=="string"){try{ret=internalEval(val["[[Call]]"])}catch(e){}}for(i in val){if(Object.prototype.hasOwnProperty.call(val,i)){ret[i]=recompile(val[i])}}}return ret}function addStyle(b){if(document.createStyleSheet){document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeEnd","&nbsp;<style>"+b+"</style>")}else{var a=document.createElement("style");a.appendChild(document.createTextNode(b));document.getElementsByTagName("head")[0].appendChild(a)}}function alterCSS(text){var temp="",imgPassages=tale.lookup("tags","Twine.image");text=text.replace(/\/\*(?:[^\*]|\*(?!\/))*\*\//g,"");text=text.replace(/:link/g,"[class*=Link]");text=text.replace(/:visited/g,".visitedLink");text=text.replace(/@import\s+(?:url\s*\(\s*['"]?|['"])[^"'\s]+(?:['"]?\s*\)|['"])\s*([\w\s\(\)\d\:,\-]*);/g,function(e){temp+=e;return""});text=temp+text;return text.replace(new RegExp(Wikifier.imageFormatter.lookahead,"gim"),function(m,p1,p2,p3,src){for(var i=0;i<imgPassages.length;i++){if(imgPassages[i].title==src){src=imgPassages[i].text;break}}return"url("+src+")"})}function setTransitionCSS(styleText){styleText=alterCSS(styleText);var style=document.getElementById("transitionCSS");style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText)}function throwError(a,b,tooltip){if(a){var elem=insertElement(a,"span",null,"marked",b);tooltip&&elem.setAttribute("title",tooltip)}else{alert("Regrettably, this "+tale.identity()+"'s code just ran into a problem:\n"+b+".\n"+softErrorMessage)}}Math.easeInOut=function(a){return(1-((Math.cos(a*Math.PI)+1)/2))};String.prototype.readMacroParams=function(keepquotes){var exec,re=/(?:\s*)(?:(?:"([^"]*)")|(?:'([^']*)')|(?:\[\[((?:[^\]]|\](?!\]))*)\]\])|([^"'\s]\S*))/mg,params=[];do{var val;exec=re.exec(this);if(exec){if(exec[1]){val=exec[1];keepquotes&&(val='"'+val+'"')}else{if(exec[2]){val=exec[2];keepquotes&&(val="'"+val+"'")}else{if(exec[3]){val=exec[3];keepquotes&&(val='"'+val.replace('"','\\"')+'"')}else{if(exec[4]){val=exec[4]}}}}val&&params.push(val)}}while(exec);return params};String.prototype.readBracketedList=function(){var c,b="\\[\\[([^\\]]+)\\]\\]",a="[^\\s$]+",e="(?:"+b+")|("+a+")",d=new RegExp(e,"mg"),f=[];do{c=d.exec(this);if(c){if(c[1]){f.push(c[1])}else{if(c[2]){f.push(c[2])}}}}while(c);return(f)};function rot13(s){return s.replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt()+13)?c:c-26)})}Object.create||(function(){var F=function(){};Object.create=function(o){if(typeof o!="object"){throw TypeError()}F.prototype=o;return new F()}})();String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")});Array.isArray||(Array.isArray=function(arg){return Object.prototype.toString.call(arg)==="[object Array]"});Array.prototype.indexOf||(Array.prototype.indexOf=function(b,d){d=(d==null)?0:d;var a=this.length;for(var c=d;c<a;c++){if(this[c]==b){return c
}}return -1});Array.prototype.forEach||(Array.prototype.forEach=function(fun){if(this==null){throw TypeError()}var t=Object(this);var len=+t.length;if(typeof fun!="function"){throw TypeError()}var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){fun.call(thisArg,t[i],i,t)}}});(function(){function t(t){this.message=t}var e=window,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=Error(),t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-8*(a%1))){if(n=e.charCodeAt(a+=0.75),n>255){throw new t()}o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),1==e.length%4){throw new t()}for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(6&-2*a)):0){n=r.indexOf(n)}return c})})();var hasTransition="transition" in document.documentElement.style||"-webkit-transition" in document.documentElement.style;function fade(f,c){var h;var e=f.cloneNode(true);var g=(c.fade=="in")?1:-1;f.parentNode.replaceChild(e,f);if(c.fade=="in"){h=0;e.style.visibility="visible"}else{h=1
}b(e,h);var a=window.setInterval(d,25);function d(){h+=0.05*g;b(e,Math.easeInOut(h));if(((g==1)&&(h>=1))||((g==-1)&&(h<=0))){f.style.visibility=(c.fade=="in")?"visible":"hidden";if(e.parentNode){e.parentNode.replaceChild(f,e)}window.clearInterval(a);if(c.onComplete){c.onComplete.call(f)}}}function b(k,j){var l=Math.floor(j*100);k.style.zoom=1;k.style.filter="alpha(opacity="+l+")";k.style.opacity=j}}function History(){this.history=[{passage:null,variables:{}}];this.id=new Date().getTime()+"";this.hash=""}History.prototype.encodeHistory=function(b,noVars){var ret=".",vars,type,hist=this.history[b],d=this.history[b+1]?delta(this.history[b+1].variables,hist.variables):hist.variables;function vtob(val){try{return window.btoa(unescape(encodeURIComponent(JSON.stringify(decompile(val)))))}catch(e){return"0"
}}if(!hist.passage||hist.passage.id==null){return""
}ret+=hist.passage.id.toString(36);if(noVars){return ret
}for(vars in d){type=typeof d[vars];if(type!="undefined"){ret+="$"+vtob(vars)+","+vtob(d[vars])}}for(vars in hist.linkVars){type=typeof hist.linkVars[vars];if(type!="function"&&type!="undefined"){ret+="["+vtob(vars)+","+vtob(hist.linkVars[vars])}}return ret};History.decodeHistory=function(str,prev){var name,splits,variable,c,d,ret={variables:clone(prev.variables)||{}},match=/([a-z0-9]+)((?:\$[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)((?:\[[A-Za-z0-9\+\/=]+,[A-Za-z0-9\+\/=]+)*)/g.exec(str);function btov(str){try{return recompile(JSON.parse(decodeURIComponent(escape(window.atob(str)))))}catch(e){return 0
}}if(match){name=parseInt(match[1],36);if(!tale.has(name)){return false
}if(match[2]){ret.variables||(ret.variables={});splits=match[2].split("$");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.variables[d]=btov(variable[1])}}}if(match[3]){ret.linkVars||(ret.linkVars={});splits=match[3].split("[");for(c=0;c<splits.length;c++){variable=splits[c].split(",");d=btov(variable[0]);if(d){ret.linkVars[d]=btov(variable[1])}}}ret.passage=tale.get(name);return ret}};History.prototype.save=function(){var hist,b,a="";for(b=this.history.length-1;b>=0;b--){hist=this.history[b];if(!hist){break
}a+=this.encodeHistory(b)}return"#"+a};History.prototype.restore=function(){var a,b,c,vars;try{if(!window.location.hash||(window.location.hash=="#")){if(testplay){if(tale.has("StoryInit")){new Wikifier(insertElement(null,"span"),tale.get("StoryInit").text)}this.display(testplay,null,"quietly");return true}return false}if(window.location.hash.substr(0,2)=="#!"){c=window.location.hash.substr(2).split("_").join(" ");this.display(c,null,"quietly");return true}a=window.location.hash.replace("#","").split(".");for(b=0;b<a.length;b++){vars=History.decodeHistory(a[b],vars||{});if(vars){if(b==a.length-1){vars.variables=clone(this.history[0].variables);for(c in this.history[0].linkVars){vars.variables[c]=clone(this.history[0].linkVars[c])}this.history.unshift(vars);this.display(vars.passage.title,null,"back")}else{this.history.unshift(vars)}}}return true}catch(d){return false
}};History.prototype.saveVariables=function(c,el,callback){if(typeof callback=="function"){callback.call(el)}this.history.unshift({passage:c,variables:clone(this.history[0].variables)})};var restart=History.prototype.restart=function(){if(typeof window.history.replaceState=="function"){(typeof this.pushState=="function")&&this.pushState(true,window.location.href.replace(/#.*$/,""));window.location.reload()}else{window.location.hash=""}};var version={major:4,minor:2,revision:0,date:new Date("2014"),extensions:{}};var testplay,tale,state,prerender={},postrender={},macros=window.macros={};version.extensions.displayMacro={major:2,minor:0,revision:0};macros.display={parameters:[],handler:function(place,macroName,params,parser){var t,j,output,oldDisplayParams,name=parser.fullArgs();if(macroName!="display"){output=macroName;params=parser.fullMatch().replace(/^\S*|>>$/g,"").readMacroParams(true);try{for(j=0;j<params.length;j++){params[j]=internalEval(Wikifier.parse(params[j]))}}catch(e){throwError(place,parser.fullMatch()+" bad argument: "+params[j],parser.fullMatch());return}}else{try{output=internalEval(name)}catch(e){}if(output==null){if(tale.has(name)){output=name
}}}if(!output){throwError(place,"<<"+macroName+'>>: "'+name+'" did not evaluate to a passage name',parser.fullMatch())}else{if(!tale.has(output+"")){throwError(place,"<<"+macroName+'>>: The "'+output+'" passage does not exist',parser.fullMatch())}else{oldDisplayParams=this.parameters;this.parameters=params;t=tale.get(output+"");if(t.tags.indexOf("script")>-1){scriptEval(t)}else{new Wikifier(place,t.processText())}this.parameters=oldDisplayParams
}}}};version.extensions.actionsMacro={major:1,minor:2,revision:0};macros.actions={handler:function(a,f,g){var v=state.history[0].variables,e=insertElement(a,"ul");if(!v["actions clicked"]){v["actions clicked"]={}}for(var b=0;b<g.length;b++){if(v["actions clicked"][g[b]]){continue
}var d=insertElement(e,"li");var c=Wikifier.createInternalLink(d,g[b],(function(link){return function(){state.history[0].variables["actions clicked"][link]=true}}(g[b])));insertText(c,g[b])}}};version.extensions.printMacro={major:1,minor:1,revision:1};macros.print={handler:function(place,macroName,params,parser){var args=parser.fullArgs(macroName!="print"),output;try{output=internalEval(args);if(output!=null&&(typeof output!="number"||!isNaN(output))){new Wikifier(place,""+output)}}catch(e){throwError(place,"<<print>> bad expression: "+params.join(" "),parser.fullMatch())}}};version.extensions.setMacro={major:1,minor:1,revision:0};macros.set={handler:function(a,b,c,parser){macros.set.run(a,parser.fullArgs(),parser,c.join(" "))},run:function(a,expression,parser,original){try{return internalEval(expression)}catch(e){throwError(a,"bad expression: "+(original||expression),parser?parser.fullMatch():expression)}}};version.extensions.ifMacros={major:2,minor:0,revision:0};macros["if"]={handler:function(place,macroName,params,parser){var conditions=[],clauses=[],rawConds=[],srcOffset=parser.source.indexOf(">>",parser.matchStart)+2,src=parser.source.slice(srcOffset),endPos=-1,rawCond=params.join(" "),currentCond=parser.fullArgs(),currentClause="",t=0,nesting=0,i=0;for(;i<src.length;i++){if((src.substr(i,6)=="<<else")&&!nesting){rawConds.push(rawCond);conditions.push(currentCond.trim());clauses.push(currentClause);currentClause="";t=src.indexOf(">>",i+6);if(src.substr(i+6,4)==" if "||src.substr(i+6,3)=="if "){rawCond=src.slice(i+9,t);currentCond=Wikifier.parse(rawCond)}else{rawCond="";currentCond="true"}i=t+2}if(src.substr(i,5)=="<<if "){nesting++
}if(src.substr(i,9)=="<<endif>>"){nesting--;if(nesting<0){endPos=srcOffset+i+9;rawConds.push(rawCond);conditions.push(currentCond.trim());clauses.push(currentClause);break}}currentClause+=src.charAt(i)}if(endPos!=-1){parser.nextMatch=endPos;try{for(i=0;i<clauses.length;i++){if(internalEval(conditions[i])){new Wikifier(place,clauses[i]);break}}}catch(e){throwError(place,"<<"+(i?"else ":"")+"if>> bad condition: "+rawConds[i],!i?parser.fullMatch():"<<else if "+rawConds[i]+">>")}}else{throwError(place,"I can't find a matching <<endif>>",parser.fullMatch())}}};macros["else"]=macros.elseif=macros.endif={handler:function(){}};version.extensions.rememberMacro={major:2,minor:0,revision:0};macros.remember={handler:function(place,macroName,params,parser){var variable,value,re,match,statement=params.join(" ");macros.set.run(place,parser.fullArgs(),null,params.join(" "));if(!window.localStorage){throwError(place,"<<remember>> can't be used "+(window.location.protocol=="file:"?" by local HTML files ":"")+" in this browser.",parser.fullMatch());return}re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1];value=state.history[0].variables[variable];try{value=JSON.stringify(value)}catch(e){throwError(place,"can't <<remember>> the variable $"+variable+" ("+(typeof value)+")",parser.fullMatch());return}window.localStorage[this.prefix+variable]=value}},init:function(){var i,variable,value;if(tale.has("StoryTitle")){this.prefix="Twine."+tale.title+"."}else{this.prefix="Twine.Untitled Story."}for(i in window.localStorage){if(i.indexOf(this.prefix)==0){variable=i.substr(this.prefix.length);value=window.localStorage[i];try{value=JSON.parse(value);state.history[0].variables[variable]=value}catch(e){}}}},expire:null,prefix:null};version.extensions.forgetMacro={major:1,minor:0,revision:0};macros.forget={handler:function(place,macroName,params){var re,match,variable,statement=params.join(" ");re=new RegExp(Wikifier.textPrimitives.variable,"g");while(match=re.exec(statement)){variable=match[1]+"";delete state.history[0].variables[variable];delete window.localStorage[macros.remember.prefix+variable]}}};version.extensions.SilentlyMacro={major:1,minor:1,revision:0};macros.nobr=macros.silently={handler:function(place,macroName,f,parser){var i,h=insertElement(null,"div"),k=parser.source.indexOf(">>",parser.matchStart)+2,a=parser.source.slice(k),d=-1,c="",l=0;for(i=0;i<a.length;i++){if(a.substr(i,macroName.length+7)=="<<end"+macroName+">>"){if(l==0){d=k+i+macroName.length+7;break}else{l--
}}else{if(a.substr(i,macroName.length+4)=="<<"+macroName+">>"){l++
}}if(macroName=="nobr"&&a.charAt(i)=="\n"){c+="\u200c"}else{c+=a.charAt(i)}}if(d!=-1){new Wikifier(macroName=="nobr"?place:h,c);parser.nextMatch=d}else{throwError(place,"can't find matching <<end"+macroName+">>",parser.fullMatch())}}};macros.endsilently={handler:function(){}};version.extensions.choiceMacro={major:2,minor:0,revision:0};macros.choice={callback:function(){var i,other,passage=findPassageParent(this);if(passage){other=passage.querySelectorAll(".choice");for(i=0;i<other.length;i++){other[i].outerHTML="<span class=disabled>"+other[i].innerHTML+"</span>"}state.history[0].variables["choice clicked"][passage.id.replace(/\|[^\]]*$/,"")]=true}},handler:function(A,C,D,parser){var link,id,match,text=D[1]||D[0].split("|")[0],passage=findPassageParent(A);if(!passage){throwError(A,"<<"+C+">> can't be used here.",parser.fullMatch());return}id=(passage&&passage.id.replace(/\|[^\]]*$/,""));if(id&&(state.history[0].variables["choice clicked"]||(state.history[0].variables["choice clicked"]={}))[id]){insertElement(A,"span",null,"disabled",text)}else{match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){link=Wikifier.linkFormatter.makeLink(A,match,this.callback)}else{link=Wikifier.linkFormatter.makeLink(A,[0,text,D[0]],this.callback)}link.className+=" "+C}}};version.extensions.backMacro={major:2,minor:0,revision:0};macros.back={labeltext:"&#171; back",handler:function(a,b,e,parser){var labelParam,c,el,labeltouse=this.labeltext,steps=1,stepsParam=e.indexOf("steps"),stepsParam2="";if(stepsParam>0){stepsParam2=e[stepsParam-1];if(stepsParam2[0]=="$"){try{stepsParam2=internalEval(Wikifier.parse(stepsParam2))}catch(r){throwError(a,parser.fullMatch()+" bad expression: "+r.message,parser.fullMatch());return}}steps=+stepsParam2;if(steps>=state.history.length-1){steps=state.history.length-2}e.splice(stepsParam-1,2)}labelParam=e.indexOf("label");if(labelParam>-1){if(!e[labelParam+1]){throwError(a,parser.fullMatch()+": "+e[labelParam]+" keyword needs an additional label parameter",parser.fullMatch());return}labeltouse=e[labelParam+1];e.splice(labelParam,2)}if(stepsParam<=0){if(e[0]){if(e[0].charAt(0)=="$"){try{e=internalEval(Wikifier.parse(e[0]))}catch(r){throwError(a,parser.fullMatch()+" bad expression: "+r.message,parser.fullMatch());return}}else{e=e[0]}if(!tale.has(e)){throwError(a,'The "'+e+'" passage does not exist',parser.fullMatch());return}for(c=0;c<state.history.length;c++){if(state.history[c].passage.title==e){steps=c;break}}}}el=document.createElement("a");el.className=b;addClickHandler(el,(function(b){return function(){return macros.back.onclick(b=="back",steps,el)}}(b)));el.innerHTML=labeltouse;a.appendChild(el)}};version.extensions.returnMacro={major:2,minor:0,revision:0};macros["return"]={labeltext:"&#171; return",handler:function(a,b,e){macros.back.handler.call(this,a,b,e)}};version.extensions.textInputMacro={major:2,minor:0,revision:0};macros.checkbox=macros.radio=macros.textinput={handler:function(A,C,D,parser){var match,class_=C.replace("input","Input"),q=A.querySelectorAll("input"),id=class_+"|"+((q&&q.length)||0);input=insertElement(null,"input",id,class_);input.name=D[0];input.type=C.replace("input","");A.appendChild(input);if(C=="textinput"&&D[1]){match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){Wikifier.linkFormatter.makeLink(A,match,macros.button.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,(D[2]||D[1]),D[1]],macros.button.callback,"button")}}else{if((C=="radio"||C=="checkbox")&&D[1]){input.value=D[1];insertElement(A,"label","","",D[1]).setAttribute("for",id);if(D[2]){insertElement(A,"br");D.splice(1,1);macros[C].handler(A,C,D)}}}}};version.extensions.buttonMacro={major:1,minor:0,revision:0};macros.button={callback:function(){var el=findPassageParent(this);if(el){var inputs=el.querySelectorAll("input");for(i=0;i<inputs.length;i++){if(inputs[i].type!="checkbox"&&(inputs[i].type!="radio"||inputs[i].checked)){macros.set.run(null,Wikifier.parse(inputs[i].name+' = "'+inputs[i].value.replace(/"/g,'\\"')+'"'))}else{if(inputs[i].type=="checkbox"&&inputs[i].checked){macros.set.run(null,Wikifier.parse(inputs[i].name+" = [].concat("+inputs[i].name+" || []);"));macros.set.run(null,Wikifier.parse(inputs[i].name+'.push("'+inputs[i].value.replace(/"/g,'\\"')+'")'))}}}}},handler:function(A,C,D,parser){var link,match=new RegExp(Wikifier.linkFormatter.lookahead).exec(parser.fullMatch());if(match){Wikifier.linkFormatter.makeLink(A,match,this.callback,"button")}else{Wikifier.linkFormatter.makeLink(A,[0,D[1]||D[0],D[0]],this.callback,"button")}}};function Passage(c,b,a,ofunc){var t;if(!this||this.constructor!=Passage){throw new ReferenceError("passage() must be in lowercase")}this.title=c;ofunc=typeof ofunc=="function"&&ofunc;if(b){this.id=a;this.tags=b.getAttribute("tags");if(typeof this.tags=="string"){if(ofunc){this.tags=ofunc(this.tags)}this.tags=this.tags.readBracketedList()}else{this.tags=[]}t=b.firstChild?b.firstChild.nodeValue:"";if(ofunc&&!this.isImage()){this.text=ofunc(Passage.unescapeLineBreaks(t))}else{this.text=Passage.unescapeLineBreaks(t)}if(!this.isImage()){this.preloadImages()}if(/\.char\b|\[data\-char\b/.exec(this.text)&&Wikifier.charSpanFormatter){Wikifier.formatters.push(Wikifier.charSpanFormatter);delete Wikifier.charSpanFormatter}}else{this.text="@@This passage does not exist: "+c+"@@";this.tags=[]}}Passage.prototype.isImage=function(){return !!~(this.tags.indexOf("Twine.image"))};Passage.prototype.preloadImages=function(){var u="\\s*['\"]?([^\"'$]+\\.(jpe?g|a?png|gif|bmp|webp|svg))['\"]?\\s*",k=function(c,e){var i,d;do{d=c.exec(this.text);if(d){i=new Image();i.src=d[e]}}while(d);return k};k.call(this,new RegExp(Wikifier.imageFormatter.lookahead.replace("[^\\[\\]\\|]+",u),"mg"),4).call(this,new RegExp("url\\s*\\("+u+"\\)","mig"),1).call(this,new RegExp("src\\s*="+u,"mig"),1)};Passage.unescapeLineBreaks=function(a){if(a&&typeof a=="string"){return a.replace(/\\n/mg,"\n").replace(/\\t/mg,"\t").replace(/\\s/mg,"\\").replace(/\\/mg,"\\").replace(/\r/mg,"")}else{return""
}};Passage.prototype.setTags=function(b){var t=this.tags!=null&&this.tags.length?this.tags.join(" "):"";if(t){b.setAttribute("data-tags",this.tags.join(" "))}document.body.setAttribute("data-tags",t)};Passage.prototype.processText=function(){var ret=this.text;if(~this.tags.indexOf("nobr")){ret=ret.replace(/\n/g,"\u200c")}if(this.isImage()){ret="[img["+ret+"]]"}return ret};function Tale(){var a,b,c,lines,i,kv,nsc,isImage,settings=this.storysettings={lookup:function(a,dfault){if(!(a in this)){return dfault
}return(this[a]+"")!="off"}},tiddlerTitle="";window.tale=this;this.passages={};if(document.normalize){document.normalize()}a=document.getElementById("storeArea").children;for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&c.getAttribute("tiddler")=="StorySettings"){lines=new Passage("StorySettings",c,0,null,null).text.split("\n");for(i in lines){if(typeof lines[i]=="string"&&lines[i].indexOf(":")>-1){kv=lines[i].toLowerCase().split(":");kv[0]=kv[0].replace(/^\s+|\s+$/g,"");kv[1]=kv[1].replace(/^\s+|\s+$/g,"");if(kv[0]!="lookup"){settings[kv[0]]=kv[1]}}}}}if(settings.obfuscate=="rot13"){for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){isImage=(c.getAttribute("tags")+"").indexOf("Twine.image")>-1;if(tiddlerTitle!="StorySettings"&&!isImage){tiddlerTitle=rot13(tiddlerTitle)}this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b+1,!isImage&&rot13)
}}}else{for(b=0;b<a.length;b++){c=a[b];if(c.getAttribute&&(tiddlerTitle=c.getAttribute("tiddler"))){this.passages[tiddlerTitle]=new Passage(tiddlerTitle,c,b,null,null)}}}}Tale.prototype.has=function(a){if(typeof a=="string"){return(this.passages[a]!=null)}else{for(var i in this.passages){if(this.passages[i].id==a){return true
}}return false}};Tale.prototype.get=function(a){if(typeof a=="string"){return this.passages[a]||new Passage(a)}else{for(var i in this.passages){if(this.passages[i].id==a){return this.passages[i]}}}};Tale.prototype.lookup=function(h,g,a){var d=[];for(var c in this.passages){var f=this.passages[c];for(var b=0;b<f[h].length;b++){if(f[h][b]==g){d.push(f)}}}if(!a){a="title"
}d.sort(function(k,j){if(k[a]==j[a]){return(0)}else{return(k[a]<j[a])?-1:+1}});return d};Tale.prototype.canUndo=function(){return this.storysettings.lookup("undo",true)};Tale.prototype.identity=function(){var meta=document.querySelector("meta[name='identity']"),identity=meta?meta.getAttribute("content"):"story";return(Tale.prototype.identity=function(){return identity
})()};Tale.prototype.forEachStylesheet=function(tags,callback){var passage,i;tags=tags||[];if(typeof callback!="function"){return
}for(passage in this.passages){passage=tale.passages[passage];if(passage&&~passage.tags.indexOf("stylesheet")){for(i=0;i<tags.length;i++){if(~passage.tags.indexOf(tags[i])){callback(passage);break}}}}};Tale.prototype.setPageElements=function(){var storyTitle,defaultTitle="themoon";setPageElement("storyTitle","StoryTitle",defaultTitle);storyTitle=document.getElementById("storyTitle");document.title=this.title=(storyTitle&&(storyTitle.textContent||storyTitle.innerText))||defaultTitle;setPageElement("storySubtitle","StorySubtitle","");if(tale.has("StoryAuthor")){setPageElement("titleSeparator",null,"\n");setPageElement("storyAuthor","StoryAuthor","")}if(tale.has("StoryMenu")){document.getElementById("storyMenu").setAttribute("style","");setPageElement("storyMenu","StoryMenu","")}};function Wikifier(place,source){this.source=source;this.output=place;this.nextMatch=0;this.assembleFormatterMatches(Wikifier.formatters);this.subWikify(this.output)}Wikifier.textPrimitives={upperLetter:"[A-Z\u00c0-\u00de\u0150\u0170]",lowerLetter:"[a-z\u00df-\u00ff_0-9\\-\u0151\u0171]",anyLetter:"[A-Za-z\u00c0-\u00de\u00df-\u00ff_0-9\\-\u0150\u0170\u0151\u0171]"};Wikifier.textPrimitives.variable="\\$((?:"+Wikifier.textPrimitives.anyLetter.replace("\\-","")+"*"+Wikifier.textPrimitives.anyLetter.replace("0-9\\-","")+"+"+Wikifier.textPrimitives.anyLetter.replace("\\-","")+"*)+)";Wikifier.textPrimitives.unquoted="(?=(?:[^\"'\\\\]*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"))*[^'\"]*$)";Wikifier.prototype.assembleFormatterMatches=function(formatters){this.formatters=[];var pattern=[];for(var n=0;n<formatters.length;n++){pattern.push("("+formatters[n].match+")");this.formatters.push(formatters[n])}this.formatterRegExp=new RegExp(pattern.join("|"),"mg")};Wikifier.prototype.subWikify=function(output,terminator){var terminatorMatch,formatterMatch,oldOutput=this.output;this.output=output;var terminatorRegExp=terminator?new RegExp("("+terminator+")","mg"):null;do{this.formatterRegExp.lastIndex=this.nextMatch;if(terminatorRegExp){terminatorRegExp.lastIndex=this.nextMatch}formatterMatch=this.formatterRegExp.exec(this.source);terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null;if(terminatorMatch&&(!formatterMatch||terminatorMatch.index<=formatterMatch.index)){if(terminatorMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,terminatorMatch.index)}this.matchStart=terminatorMatch.index;this.matchLength=terminatorMatch[1].length;this.matchText=terminatorMatch[1];this.nextMatch=terminatorMatch.index+terminatorMatch[1].length;this.output=oldOutput;return}else{if(formatterMatch){if(formatterMatch.index>this.nextMatch){this.outputText(this.output,this.nextMatch,formatterMatch.index)}this.matchStart=formatterMatch.index;this.matchLength=formatterMatch[0].length;this.matchText=formatterMatch[0];this.nextMatch=this.formatterRegExp.lastIndex;var matchingFormatter=-1;for(var t=1;t<formatterMatch.length;t++){if(formatterMatch[t]){matchingFormatter=t-1;break}}if(matchingFormatter!=-1){this.formatters[matchingFormatter].handler(this)}}}}while(terminatorMatch||formatterMatch);if(this.nextMatch<this.source.length){this.outputText(this.output,this.nextMatch,this.source.length);this.nextMatch=this.source.length}this.output=oldOutput};Wikifier.prototype.outputText=function(place,startPos,endPos){if(place){insertText(place,this.source.substring(startPos,endPos))}};Wikifier.prototype.fullMatch=function(){return this.source.slice(this.matchStart,this.source.indexOf(">>",this.matchStart)+2)};Wikifier.prototype.fullArgs=function(includeName){var source=this.source.replace(/\u200c/g," "),endPos=this.nextMatch-2,startPos=source.indexOf(includeName?"<<":" ",this.matchStart);if(!~startPos||!~endPos||endPos<=startPos){return""
}return Wikifier.parse(source.slice(startPos+(includeName?2:1),endPos).trim())};Wikifier.parse=function(input){var m,re,b=input,found=[],g=Wikifier.textPrimitives.unquoted;function alter(from,to){b=b.replace(new RegExp(from+g,"gim"),to);return alter}re=new RegExp(Wikifier.textPrimitives.variable+g,"gi");while(m=re.exec(input)){if(!~found.indexOf(m[0])){b=m[0]+" == null && ("+m[0]+" = 0);"+b;found.push(m[0])}}alter(Wikifier.textPrimitives.variable,"state.history[0].variables.$1")("\\beq\\b"," == ")("\\bneq\\b"," != ")("\\bgt\\b"," > ")("\\bgte\\b"," >= ")("\\blt\\b"," < ")("\\blte\\b"," <= ")("\\band\\b"," && ")("\\bor\\b"," || ")("\\bnot\\b"," ! ")("\\bis\\b"," == ")("\\bto\\b"," = ");return b};Wikifier.formatHelpers={charFormatHelper:function(a){var b=insertElement(a.output,this.element);a.subWikify(b,this.terminator)},inlineCssHelper:function(w){var s,v,lookaheadMatch,gotMatch,styles=[],lookahead=Wikifier.styleByCharFormatter.lookahead,lookaheadRegExp=new RegExp(lookahead,"mg"),hadStyle=false,unDash=function(str){var s=str.split("-");if(s.length>1){for(var t=1;t<s.length;t++){s[t]=s[t].substr(0,1).toUpperCase()+s[t].substr(1)}}return s.join("")};styles.className="";do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);gotMatch=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(gotMatch){hadStyle=true;if(lookaheadMatch[5]){styles.className+=lookaheadMatch[5].replace(/\./g," ")+" "}else{if(lookaheadMatch[1]){s=unDash(lookaheadMatch[1]);v=lookaheadMatch[2]}else{s=unDash(lookaheadMatch[3]);v=lookaheadMatch[4]}}switch(s){case"bgcolor":s="backgroundColor";break;case"float":s="cssFloat";break}styles.push({style:s,value:v});w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}while(gotMatch);return styles},monospacedByLineHelper:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){insertElement(w.output,"pre",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}};Wikifier.formatters=[{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhc]?)$",lookahead:"^\\|([^\\n]*)\\|([fhc]?)$",rowTerminator:"\\|(?:[fhc]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[fhc]?$\\n?)",cellTerminator:"(?:\\x20*)\\|",rowTypes:{"c":"caption","h":"thead","":"tbody","f":"tfoot"},handler:function(w){var rowContainer,rowElement,lookaheadMatch,matched,table=insertElement(w.output,"table"),lookaheadRegExp=new RegExp(this.lookahead,"mg"),currRowType=null,nextRowType,prevColumns=[],rowCount=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source),matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){nextRowType=lookaheadMatch[2];if(nextRowType!=currRowType){rowContainer=insertElement(table,this.rowTypes[nextRowType])}currRowType=nextRowType;if(currRowType=="c"){if(rowCount==0){rowContainer.setAttribute("align","top")}else{rowContainer.setAttribute("align","bottom")}w.nextMatch=w.nextMatch+1;w.subWikify(rowContainer,this.rowTerminator)}else{rowElement=insertElement(rowContainer,"tr");this.rowHandler(w,rowElement,prevColumns)}rowCount++}}while(matched)},rowHandler:function(w,e,prevColumns){var cellMatch,matched,col=0,currColCount=1,cellRegExp=new RegExp(this.cellPattern,"mg");do{cellRegExp.lastIndex=w.nextMatch;cellMatch=cellRegExp.exec(w.source);matched=cellMatch&&cellMatch.index==w.nextMatch;if(matched){if(cellMatch[1]=="~"){var last=prevColumns[col];if(last){last.rowCount++;last.element.setAttribute("rowSpan",last.rowCount);last.element.setAttribute("rowspan",last.rowCount);last.element.valign="center"}w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[1]==">"){currColCount++;w.nextMatch=cellMatch.index+cellMatch[0].length-1}else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}else{var spaceLeft=false,spaceRight=false,lastColCount,lastColElement,styles,cell,t;w.nextMatch++;styles=Wikifier.formatHelpers.inlineCssHelper(w);while(w.source.substr(w.nextMatch,1)==" "){spaceLeft=true;w.nextMatch++}if(w.source.substr(w.nextMatch,1)=="!"){cell=insertElement(e,"th");w.nextMatch++}else{cell=insertElement(e,"td")}prevColumns[col]={rowCount:1,element:cell};lastColCount=1;lastColElement=cell;if(currColCount>1){cell.setAttribute("colSpan",currColCount);cell.setAttribute("colspan",currColCount);currColCount=1}for(t=0;t<styles.length;t++){cell.style[styles[t].style]=styles[t].value}w.subWikify(cell,this.cellTerminator);if(w.matchText.substr(w.matchText.length-2,1)==" "){spaceRight=true
}if(spaceLeft&&spaceRight){cell.align="center"}else{if(spaceLeft){cell.align="right"}else{if(spaceRight){cell.align="left"}}}w.nextMatch=w.nextMatch-1}}}col++}}while(matched)}},{name:"rule",match:"^----$\\n?",handler:function(w){insertElement(w.output,"hr")}},{name:"emdash",match:"--",becomes:String.fromCharCode(8212),handler:function(a){insertElement(a.output,"span",null,"char",this.becomes).setAttribute("data-char","emdash")}},{name:"heading",match:"^!{1,5}",terminator:"\\n",handler:function(w){var e=insertElement(w.output,"h"+w.matchLength);w.subWikify(e,this.terminator)}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:"^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\}\\}\\}$\\n?)",handler:Wikifier.formatHelpers.monospacedByLineHelper},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){var e=insertElement(w.output,"blockquote");w.subWikify(e,this.terminator)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:"^(?:(\\*+)|(#+))",terminator:"\\n",handler:function(w){var newType,newLevel,t,len,bulletType,lookaheadMatch,matched,lookaheadRegExp=new RegExp(this.lookahead,"mg"),placeStack=[w.output],currType=null,currLevel=0;w.nextMatch=w.matchStart;do{lookaheadRegExp.lastIndex=w.nextMatch;lookaheadMatch=lookaheadRegExp.exec(w.source);matched=lookaheadMatch&&lookaheadMatch.index==w.nextMatch;if(matched){newLevel=lookaheadMatch[0].length;if(lookaheadMatch[1]){bulletType=lookaheadMatch[1].slice(-1);newType="ul"}else{if(lookaheadMatch[2]){newType="ol"
}}w.nextMatch+=newLevel;if(newLevel>currLevel){for(t=currLevel;t<newLevel;t++){placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}else{if(newLevel<currLevel){for(t=currLevel;t>newLevel;t--){placeStack.pop()}}else{if(newLevel==currLevel&&newType!=currType){placeStack.pop();placeStack.push(insertElement(placeStack[placeStack.length-1],newType))}}}currLevel=newLevel;currType=newType;t=insertElement(placeStack[placeStack.length-1],"li");if(bulletType&&bulletType!="*"){t.setAttribute("data-bullet",bulletType)}w.subWikify(t,this.terminator)}}while(matched)}},(Wikifier.urlFormatter={name:"urlLink",match:"(?:https?|mailto|javascript|ftp|data):[^\\s'\"]+(?:/|\\b)",handler:function(w){var e=Wikifier.createExternalLink(w.output,w.matchText);w.outputText(e,w.matchStart,w.nextMatch)}}),(Wikifier.linkFormatter={name:"prettyLink",match:"\\[\\[",lookahead:"\\[\\[([^\\|]*?)(?:\\|(.*?))?\\](?:\\[(.*?)])?\\]",makeInternalOrExternal:function(out,title,callback,type){if(title&&!tale.has(title)&&(title.match(Wikifier.urlFormatter.match,"g")||~title.search(/[\.\\\/#]/))){return Wikifier.createExternalLink(out,title,callback,type)
}else{return Wikifier.createInternalLink(out,title,callback,type)}},makeCallback:function(code,callback){return function(){macros.set.run(null,Wikifier.parse(code),null,code);typeof callback=="function"&&callback.call(this)}},makeLink:function(out,match,callback2,type){var link,title,callback;if(match[3]){callback=this.makeCallback(match[3],callback2)}else{typeof callback2=="function"&&(callback=callback2)}title=Wikifier.parsePassageTitle(match[2]||match[1]);link=this.makeInternalOrExternal(out,title,callback,type);setPageElement(link,null,match[2]?match[1]:title);return link},handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){this.makeLink(w.output,lookaheadMatch);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),(Wikifier.imageFormatter={name:"image",match:"\\[(?:[<]{0,1})(?:[>]{0,1})[Ii][Mm][Gg]\\[",lookahead:"\\[([<]?)(>?)img\\[(?:([^\\|\\]]+)\\|)?([^\\[\\]\\|]+)\\](?:\\[([^\\]]*)\\]?)?(\\])",importedImage:function(img,passageName){var imgPassages,imgname;try{imgname=internalEval(Wikifier.parse(passageName))}catch(e){}if(!imgname){imgname=passageName
}imgPassages=tale.lookup("tags","Twine.image");for(j=0;j<imgPassages.length;j++){if(imgPassages[j].title==imgname){img.src=imgPassages[j].text;break}}},handler:function(w){var e,img,j,lookaheadMatch,lookaheadRegExp=new RegExp(this.lookahead,"mig");lookaheadRegExp.lastIndex=w.matchStart;lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){e=w.output,title=Wikifier.parsePassageTitle(lookaheadMatch[5]);if(title){e=Wikifier.linkFormatter.makeInternalOrExternal(w.output,title)}img=insertElement(e,"img");if(lookaheadMatch[1]){img.align="left"}else{if(lookaheadMatch[2]){img.align="right"}}if(lookaheadMatch[3]){img.title=lookaheadMatch[3]}this.importedImage(img,lookaheadMatch[4]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}}),{name:"macro",match:"<<",lookahead:/<<([^>\s]+)(?:\s*)((?:\\.|'(?:[^'\\]*\\.)*[^'\\]*'|"(?:[^"\\]*\\.)*[^"\\]*"|[^'"\\>]|>(?!>))*)>>/mg,handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead);lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source.replace(/\u200c/g,"\n"));if(lookaheadMatch&&lookaheadMatch.index==w.matchStart&&lookaheadMatch[1]){var params=lookaheadMatch[2].readMacroParams();w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length;var name=lookaheadMatch[1];try{var macro=macros[name];if(macro&&typeof macro=="object"&&macro.handler){macro.handler(w.output,name,params,w)}else{if(name[0]=="$"){macros.print.handler(w.output,name,[name].concat(params),w)}else{if(tale.has(name)){macros.display.handler(w.output,name,[name].concat(params),w)}else{throwError(w.output,'No macro or passage called "'+name+'"',w.fullMatch())}}}}catch(e){throwError(w.output,"Error executing macro "+name+": "+e.toString(),w.fullMatch())}}}},{name:"html",match:"<html>",lookahead:"<html>((?:.|\\n)*?)</html>",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"span");e.innerHTML=lookaheadMatch[1];w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"commentByBlock",match:"/%",lookahead:"/%((?:.|\\n)*?)%/",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},{name:"boldByChar",match:"''",terminator:"''",element:"strong",handler:Wikifier.formatHelpers.charFormatHelper},{name:"strikeByChar",match:"==",terminator:"==",element:"strike",handler:Wikifier.formatHelpers.charFormatHelper},{name:"underlineByChar",match:"__",terminator:"__",element:"u",handler:Wikifier.formatHelpers.charFormatHelper},{name:"italicByChar",match:"//",terminator:"//",element:"em",handler:Wikifier.formatHelpers.charFormatHelper},{name:"subscriptByChar",match:"~~",terminator:"~~",element:"sub",handler:Wikifier.formatHelpers.charFormatHelper},{name:"superscriptByChar",match:"\\^\\^",terminator:"\\^\\^",element:"sup",handler:Wikifier.formatHelpers.charFormatHelper},{name:"monospacedByChar",match:"\\{\\{\\{",lookahead:"\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}",handler:function(w){var lookaheadRegExp=new RegExp(this.lookahead,"mg");lookaheadRegExp.lastIndex=w.matchStart;var lookaheadMatch=lookaheadRegExp.exec(w.source);if(lookaheadMatch&&lookaheadMatch.index==w.matchStart){var e=insertElement(w.output,"code",null,null,lookaheadMatch[1]);w.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}}},(Wikifier.styleByCharFormatter={name:"styleByChar",match:"@@",terminator:"@@",lookahead:"(?:([^\\(@]+)\\(([^\\)\\|\\n]+)(?:\\):))|(?:([^\\.:@]+):([^;\\|\\n]+);)|(?:\\.([^;\\|\\n]+);)",handler:function(w){var e=insertElement(w.output,"span",null,null,null);var styles=Wikifier.formatHelpers.inlineCssHelper(w);if(styles.length==0){e.className="marked"}else{for(var t=0;t<styles.length;t++){e.style[styles[t].style]=styles[t].value}if(typeof styles.className=="string"){e.className=styles.className}}w.subWikify(e,this.terminator)}}),{name:"lineBreak",match:"\\n",handler:function(w){insertElement(w.output,"br")}},{name:"continuedLine",match:"\\\\\\s*?\\n",handler:function(a){a.nextMatch=a.matchStart+2}},{name:"htmlCharacterReference",match:"(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)",handler:function(w){var el=document.createElement("div");el.innerHTML=w.matchText;insertText(w.output,el.textContent)}},{name:"htmltag",match:"<(?:\\/?[\\w\\-]+|[\\w\\-]+(?:(?:\\s+[\\w\\-]+(?:\\s*=\\s*(?:\\\".*?\\\"|'.*?'|[^'\\\">\\s]+))?)+\\s*|\\s*)\\/?)>",tagname:"<(\\w+)",voids:["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],tableElems:["table","thead","tbody","tfoot","th","tr","td","colgroup","col","caption","figcaption"],cleanupTables:function(e){var i,name,elems=[].slice.call(e.children);for(i=0;i<elems.length;i++){if(elems[i].tagName){name=elems[i].tagName.toLowerCase();if(this.tableElems.indexOf(name)==-1){elems[i].outerHTML=""}else{if(["col","caption","figcaption","td","th"].indexOf(name)==-1){this.cleanupTables.call(this,elems[i])}}}}},handler:function(a){var tmp,passage,setter,e,isvoid,isstyle,lookaheadRegExp,lookaheadMatch,lookahead,re=new RegExp(this.tagname).exec(a.matchText),tn=re&&re[1]&&re[1].toLowerCase();if(tn&&tn!="html"){lookahead="<\\/\\s*"+tn+"\\s*>";isvoid=(this.voids.indexOf(tn)!=-1);isstyle=tn=="style"||tn=="script";lookaheadRegExp=new RegExp(lookahead,"mg");lookaheadRegExp.lastIndex=a.matchStart;lookaheadMatch=lookaheadRegExp.exec(a.source);if(lookaheadMatch||isvoid){if(isstyle){e=document.createElement(tn);e.type="text/css";tmp=a.source.slice(a.nextMatch,lookaheadMatch.index);e.styleSheet?(e.styleSheet.cssText=tmp):(e.innerHTML=tmp);a.nextMatch=lookaheadMatch.index+lookaheadMatch[0].length}else{e=document.createElement(a.output.tagName);e.innerHTML=a.matchText;while(e.firstChild){e=e.firstChild}if(!isvoid){a.subWikify(e,lookahead)}}if(e.tagName.toLowerCase()=="table"){this.cleanupTables.call(this,e)}if(setter=e.getAttribute("data-setter")){setter=Wikifier.linkFormatter.makeCallback(setter)}if(passage=e.getAttribute("data-passage")){if(tn!="img"){addClickHandler(e,Wikifier.linkFunction(Wikifier.parsePassageTitle(passage),e,setter));if(tn=="area"||tn=="a"){e.setAttribute("href","javascript:;")}}else{Wikifier.imageFormatter.importedImage(e,passage)}}a.output.appendChild(e)}else{throwError(a.output,"HTML tag '"+tn+"' wasn't closed.",a.matchText)}}}}];Wikifier.charSpanFormatter={name:"char",match:"[^\n]",handler:function(a){insertElement(a.output,"span",null,"char",a.matchText).setAttribute("data-char",a.matchText==" "?"space":a.matchText=="\t"?"tab":a.matchText)}};Wikifier.parsePassageTitle=function(title){if(title&&!tale.has(title)){try{title=(internalEval(this.parse(title))||title)+""}catch(e){}}return title};Wikifier.linkFunction=function(title,el,callback){return function(){if(state.rewindTo){var passage=findPassageParent(el);if(passage&&passage.parentNode.lastChild!=passage){state.rewindTo(passage,true)}}state.display(title,el,null,callback)}};Wikifier.createInternalLink=function(place,title,callback,type){var tag=(type=="button"?"button":"a"),suffix=(type=="button"?"Button":"Link"),el=insertElement(place,tag);if(tale.has(title)){el.className="internal"+suffix;if(visited(title)){el.className+=" visited"+suffix}}else{el.className="broken"+suffix}addClickHandler(el,Wikifier.linkFunction(title,el,callback));if(place){place.appendChild(el)}return el};Wikifier.createExternalLink=function(place,url,callback,type){var tag=(type=="button"?"button":"a"),el=insertElement(place,tag);el.href=url;el.className="external"+(type=="button"?"Button":"Link");el.target="_blank";if(typeof callback=="function"){addClickHandler(el,callback)}if(place){place.appendChild(el)}return el};function visited(e){var ret=0,i=0;if(!state){return 0
}e=e||state.history[0].passage.title;if(arguments.length>1){for(ret=state.history.length;i<arguments.length;i++){ret=Math.min(ret,visited(arguments[i]))}}else{for(;i<state.history.length&&state.history[i].passage;i++){if(e==state.history[i].passage.title){ret++
}}}return ret}function visitedTag(){var i,j,sh,ret=0,tags=Array.prototype.slice.call(arguments);if(tags.length==1&&typeof tags[0]=="string"){tags=tags.split(" ")}if(!state){return 0
}sh=state.history;for(i=0;i<sh.length&&sh[i].passage;i++){for(j=0;j<tags.length||void ret++;j++){if(sh[i].passage.tags.indexOf(tags[j])==-1){break
}}}return ret}var visitedTags=visitedTag;function turns(){return state.history.length-1}function passage(){return state.history[0].passage.title}function tags(e){var ret=[],i=0;if(!state){return 0
}e=e||state.history[0].passage.title;if(arguments.length>1){for(i=arguments.length-1;i>=1;i--){ret=ret.concat(tags(arguments[i]))}}ret=ret.concat(tale.get(e).tags);return ret}function previous(){if(state&&state.history[1]){for(var d=1;d<state.history.length&&state.history[d].passage;d++){if(state.history[d].passage.title!=state.history[0].passage.title){return state.history[d].passage.title}}}return""}function random(a,b){var from,to;if(!b){from=0;to=a}else{from=Math.min(a,b);to=Math.max(a,b)}to+=1;return ~~((Math.random()*(to-from)))+from}function either(){if(Array.isArray(arguments[0])&&arguments.length==1){return either.apply(this,arguments[0])}return arguments[~~(Math.random()*arguments.length)]}function parameter(n){n=n||0;if(macros.display.parameters[n]){return macros.display.parameters[n]}return 0}function bookmark(){return state.hash||"#"}function internalEval(s){return eval("0,"+s)}function scriptEval(s){try{eval(s.text)}catch(e){alert("There is a technical problem with this "+tale.identity()+" ("+s.title+": "+e.message+")."+softErrorMessage)}}window.onbeforeunload=function(){if(tale&&tale.storysettings.lookup("exitprompt",false)&&state&&state.history.length>1){return"You are about to end this "+tale.identity()+"."}};var oldOnError=window.onerror||null,softErrorMessage="You may be able to continue playing, but some parts may not work properly.";window.onerror=function(msg,a,b,c,error){var s=(error&&(".\n\n"+error.stack.replace(/\([^\)]+\)/g,"")+"\n\n"))||(" ("+msg+").\n");alert("Sorry to interrupt, but this "+((tale&&tale.identity&&tale.identity())||"page")+"'s code has got itself in a mess"+s+softErrorMessage.slice(1));window.onerror=oldOnError;if(typeof window.onerror=="function"){window.onerror(msg,a,b,c,error)}};var $;function main(){$=window.$||function(a){return(typeof a=="string"?document.getElementById(a):a)
};var imgs,scripts,macro,style,i,styleText="",passages=document.getElementById("passages");function sanityCheck(thing){var i,j,s="NOTE: The "+thing,checks={prerender:prerender,postrender:postrender,macros:macros};for(i in checks){if(Object.prototype.hasOwnProperty.call(checks,i)&&!sanityCheck[i]){if(!checks[i]||typeof checks[i]!="object"){alert(s+" seems to have corrupted the "+i+" object."+softErrorMessage);sanityCheck[i]=true;continue}if(i!="macros"){for(j in checks[i]){if(Object.prototype.hasOwnProperty.call(checks[i],j)&&typeof checks[i][j]!="function"){alert(s+" added a property '"+j+"' to "+i+", "+"which is a "+typeof checks[i][j]+", not a function."+softErrorMessage);sanityCheck[i]=true;break}}}}}if(!sanityCheck.display){if(History.prototype.display.length<4&&!~History.prototype.display.toString().indexOf("arguments")){alert(s+" contains a function that patches History.prototype.display, but takes the wrong number of arguments."+softErrorMessage)}sanityCheck.display=true}}if(!window.JSON||!document.querySelector){return(passages.innerHTML="This "+tale.identity()+" requires a newer web browser. Sorry.")}else{passages.innerHTML=""}tale=window.tale=new Tale();if(~document.documentElement.className.indexOf("lt-ie9")){imgs=tale.lookup("tags","Twine.image");for(i=0;i<imgs.length;i++){if(imgs[i].text.length>=32768){alert("NOTE: This "+tale.identity()+"'s HTML file contains embedded images that may be too large for this browser to display."+softErrorMessage);break}}}scripts=tale.lookup("tags","script");for(i=0;i<scripts.length;i++){scriptEval(scripts[i]);sanityCheck('script passage "'+scripts[i].title+'"')}state=window.state=new History();for(i in macros){macro=macros[i];if(typeof macro.init=="function"){macro.init();sanityCheck('init() of the custom macro "'+i+'"')}}style=document.getElementById("storyCSS");for(i in tale.passages){i=tale.passages[i];if(i.tags.indexOf("stylesheet")==-1){continue
}if(i.tags+""=="stylesheet"){styleText+=i.text}else{if(i.tags.length==2&&i.tags.indexOf("transition")>-1){setTransitionCSS(i.text)}}}styleText=alterCSS(styleText);style.styleSheet?(style.styleSheet.cssText=styleText):(style.innerHTML=styleText);state.init()}setTimeout(function f(){var size,bar=document.getElementById("loadingbar"),store=document.getElementById("storeArea");if(!bar){return
}if(store){size=store.getAttribute("data-size");if(store.children.length<=size&&!tale){bar.style.width=~~((store.children.length+1)/size*100)+"%"}else{bar.outerHTML="";return}}setTimeout(f,5)},5);

var hasPushState=!!window.history&&(typeof window.history.pushState=="function")&&(function(a){try{a.setItem("test","1");a.removeItem("test");return true}catch(e){return false
}}(window.sessionStorage));Tale.prototype.canBookmark=function(){return this.canUndo()&&!this.storysettings.lookup("hash")&&(this.storysettings.lookup("bookmark",true)||!hasPushState)};History.prototype.init=function(){var a=this;if(!this.restore()){if(tale.has("StoryInit")){new Wikifier(insertElement(null,"span"),tale.get("StoryInit").text)}this.display("Start",null)}if(!hasPushState){this.hash=window.location.hash;this.interval=window.setInterval(function(){a.watchHash()},250)}};hasPushState&&(History.prototype.pushState=function(replace,uri){window.history[replace?"replaceState":"pushState"]({id:this.id,length:this.history.length},document.title,uri)});History.prototype.display=function(title,source,type,callback){var i,e,q,bookmark,hash,c=tale.get(title),p=document.getElementById("passages");if(c==null){return
}if(type!="back"){this.saveVariables(c,source,callback);hash=(tale.storysettings.lookup("hash")&&this.save())||"";if(hasPushState&&tale.canUndo()){try{sessionStorage.setItem("Twine.History"+this.id,JSON.stringify(decompile(this.history)));this.pushState(this.history.length<=2&&window.history.state=="",hash)}catch(e){alert("Your browser couldn't save the state of the "+tale.identity()+".\n"+"You may continue playing, but it will no longer be possible to undo moves from here on in.");tale.storysettings.undo="off"}}}this.hash=hash||this.save();e=c.render();if(type!="quietly"){if(hasTransition){for(i=0;i<p.childNodes.length;i+=1){q=p.childNodes[i];q.classList.add("transition-out");setTimeout((function(a){return function(){if(a.parentNode){a.parentNode.removeChild(a)}}}(q)),1000)}e.classList.add("transition-in");setTimeout(function(){e.classList.remove("transition-in")},1);e.style.visibility="visible";p.appendChild(e)}else{removeChildren(p);p.appendChild(e);fade(e,{fade:"in"
})}}else{p.appendChild(e);e.style.visibility="visible"}tale.setPageElements();if(tale.canUndo()){if(!hasPushState&&type!="back"){window.location.hash=this.hash}else{if(tale.canBookmark()){bookmark=document.getElementById("bookmark");bookmark&&(bookmark.href=this.hash)}}}window.scroll(0,0);return e};History.prototype.watchHash=function(){if(window.location.hash!=this.hash){if(window.location.hash&&(window.location.hash!="#")){this.history=[{passage:null,variables:{}}];removeChildren(document.getElementById("passages"));if(!this.restore()){alert("The passage you had previously visited could not be found.")}}else{window.location.reload()}this.hash=window.location.hash}};History.prototype.loadLinkVars=function(){for(var c in this.history[0].linkVars){this.history[0].variables[c]=clone(this.history[0].linkVars[c])}};Passage.prototype.render=function(){var b=insertElement(null,"div","passage"+this.title,"passage");b.style.visibility="hidden";this.setTags(b);this.setCSS();insertElement(b,"div","","header");var a=insertElement(b,"div","","body content");for(var i in prerender){(typeof prerender[i]=="function")&&prerender[i].call(this,a)}new Wikifier(a,this.processText());insertElement(b,"div","","footer");for(i in postrender){(typeof postrender[i]=="function")&&postrender[i].call(this,a)}return b};Passage.prototype.excerpt=function(){var b=this.text.replace(/<<.*?>>/g,"");b=b.replace(/!.*?\n/g,"");b=b.replace(/[\[\]\/]/g,"");var a=b.split("\n");while(a.length&&a[0].length==0){a.shift()}var c="";if(a.length==0||a[0].length==0){c=this.title}else{c=a[0].substr(0,30)+"..."}return c};Passage.transitionCache="";Passage.prototype.setCSS=function(){var trans=false,text="",tags=this.tags||[],c=document.getElementById("tagCSS"),c2=document.getElementById("transitionCSS");if(c&&c.getAttribute("data-tags")!=tags.join(" ")){tale.forEachStylesheet(tags,function(passage){if(~passage.tags.indexOf("transition")){if(!Passage.transitionCache&&c2){Passage.transitionCache=c2.innerHTML}setTransitionCSS(passage.text);trans=true}else{text+=alterCSS(passage.text)}});if(!trans&&Passage.transitionCache&&c2){setTransitionCSS(Passage.transitionCache);trans=false;Passage.transitionCache=""}c.styleSheet?(c.styleSheet.cssText=text):(c.innerHTML=text);c.setAttribute("data-tags",tags.join(" "))}};var Interface={init:function(){var snapback=document.getElementById("snapback"),restart=document.getElementById("restart"),bookmark=document.getElementById("bookmark");main();if(!tale){return
}if(snapback){if(!tale.lookup("tags","bookmark").length){snapback.parentNode.removeChild(snapback)}else{addClickHandler(snapback,Interface.showSnapback)}}if(bookmark&&(!tale.canBookmark()||!hasPushState)){bookmark.parentNode.removeChild(bookmark)}restart&&addClickHandler(restart,Interface.restart)},restart:function(){if(confirm("Are you sure you want to restart this "+tale.identity()+"?")){state.restart()}},showSnapback:function(a){Interface.hideAllMenus();Interface.buildSnapback();Interface.showMenu(a,document.getElementById("snapbackMenu"))},buildSnapback:function(){var b,c=false,menuelem=document.getElementById("snapbackMenu");while(menuelem.hasChildNodes()){menuelem.removeChild(menuelem.firstChild)}for(var a=state.history.length-1;a>=0;a--){if(state.history[a].passage&&state.history[a].passage.tags.indexOf("bookmark")!=-1){b=document.createElement("div");b.pos=a;addClickHandler(b,function(){return macros.back.onclick(true,this.pos)});b.innerHTML=state.history[a].passage.excerpt();menuelem.appendChild(b);c=true}}b=null;if(!c){b=document.createElement("div");b.innerHTML="<i>No passages available</i>";document.getElementById("snapbackMenu").appendChild(b)}},hideAllMenus:function(){document.getElementById("snapbackMenu").style.display="none"},showMenu:function(b,a){if(!b){b=window.event}var c={x:0,y:0};if(b.pageX||b.pageY){c.x=b.pageX;c.y=b.pageY}else{if(b.clientX||b.clientY){c.x=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c.y=b.clientY+document.body.scrollTop+document.documentElement.scrollTop}}a.style.top=c.y+"px";a.style.left=c.x+"px";a.style.display="block";addClickHandler(document,Interface.hideAllMenus);b.cancelBubble=true;if(b.stopPropagation){b.stopPropagation()}}};window.onload=Interface.init;macros.back.onclick=function(back,steps){var title;if(back){if(tale.canUndo()){window.history.go(-steps);return}while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}else{state.display(state.history[steps].passage.title)}};window.onpopstate=function(e){var title,hist,steps,i,s=e&&e.state;if(s&&s.id&&s.length!=null){hist=recompile(JSON.parse(sessionStorage.getItem("Twine.History"+s.id)));if(hist){steps=hist.length-s.length}}if(steps!=null){state.history=hist;while(steps-->=0&&state.history.length>1){title=state.history[0].passage.title;state.history.shift()}state.loadLinkVars();state.saveVariables(tale.get(title));state.display(title,null,"back")}};

testplay = "";

}());
</script>
<script title="modules">


</script>
<style id="baseCSS">
/* Sidebar */
#sidebar {
	position: fixed;
	list-style: none;
	width: 12em;
}
#sidebar #title, #sidebar #credits  {
	cursor: auto;
}
#sidebar #storySubtitle, #sidebar #storyMenu {
	display: block;
}
.menu {
	position: absolute;
	display: none;
	z-index: 5;
}
/* Passages container */
#passages {
	margin-left: 18.2em;
	position:relative;
}
/* Links */
.passage a {
	color: #4d6ad8;
}
a.internalLink, a.externalLink, a.back, a.return, [data-passage], .menu div {
	cursor: pointer;
}
a.brokenLink {
	background-color: red;
	color: #000;
}
.marked {
	background-color: #f66;
	color: #000;
}
.marked[title] {
	cursor: help;
}
.passage li[data-bullet] {
	list-style-type: none;
}
.passage li[data-bullet]:before {
	content: attr(data-bullet);
	position: relative;
	left: -1em;
}
#storeArea {
	display: none;
}
#noscript {
	margin-left: 18.2em;
	font-size: 1.2em;
	font-weight: bold;
}
/* HTML4 compatibility */
img {
	vertical-align:bottom;
}
@media screen and (max-width: 640px) {
	#sidebar {
		position: static;
		margin: 0 auto;
		padding: 0;
	}
	body #sidebar li  {
		text-align: center;
	}
	#passages {
		min-height: 100vh;
		margin-left: 0em;
	}
}
#loadingbar {
	position:fixed;
	top:0;
	left:0;
	border-top: solid #4d6ad8 6px;
	transition: width 0.5s;
}
</style>
<style id="defaultCSS">
body {
	background-color: #000;
	color: #fff;
	font-family: Verdana,sans-serif;
	font-size: 62.5%;
	margin: 4em 15% 5% 5em;
}
#sidebar {
	left: 7.5em;
	margin: 0;
	padding: 0 1em 0 0;
	font: bold 1.1em Verdana,sans-serif;
}
#sidebar ul {
	padding: 0;
}
#sidebar li {
	color: #333;
	text-align: right;
	background-repeat: no-repeat;
	margin-bottom: 1em;
	line-height: 1.4em;
	list-style: none;
}
#sidebar li a {
	color: #333;
	text-decoration: none;
}
#sidebar li a:hover, #sidebar #title a:hover, #snapback:hover, #restart:hover {
	color: #fff;
	cursor: pointer;
	text-decoration: none;
}
#sidebar #title {
	font-size: 150%;
}
#sidebar #title, #sidebar #title:hover, #sidebar #title a {
	color: #999;
}
#sidebar #storySubtitle {
	font-size: 75%;
}
#storyAuthor {
	font-size: 50%;
}
#sidebar #storyMenu {
	line-height: 2.5em;
	margin-bottom: .5em;
	color: #999;
	cursor: auto;
}
#sidebar #credits {
	padding-top: 2em;
	font-weight: normal;
	font-size: 80%;
}
#sidebar #credits:hover {
	color: #333;
}
#sidebar #credits a {
	text-decoration: none;
}
#passages {
	border-left: 1px solid #333;
	padding-left: 1.5em;
}
.menu {
	background-color: #343434;
	color: #fff;
	opacity: .9;
	border: 1px solid #fff;
	text-align: left;
	font: 1.1em Verdana;
	line-height: 2em;
}
.menu div {
	padding: 0 .4em;
}
.menu div:hover {
	cursor: pointer;
	background-color: #fff;
	color: #343434;
}
.passage {
	font-size: 1.2em;
	line-height: 175%;
	margin-bottom: 2em;
	text-align: left;
}
.passage a {
	font-weight: bold;
	text-decoration: none;
}
.passage a:hover {
	color: #8ea6ff;
	text-decoration: underline;
}
.content > ul {
	padding-top: 1.3em;
}
.passage ul, .passage ol {
	margin-left: .5em;
	padding-left: 1.5em;
}
.passage li {
	margin-right: 6em;
}
.passage table {
	border-collapse: collapse;
	font-size: 100%;
	margin: .8em 1.0em;
}
.passage th,.passage td,.passage tr,.passage caption {
	padding: 3px;
}
.passage hr {
	height: 1px;
}
.passage center {
	max-width:50%;
	margin:auto;
}
.marked {
	margin-right: 12px;
	padding: 3px;
}
.disabled {
	font-weight: bold;
	color: #333;
}
@media screen and (max-width: 640px) {
	body {
		margin: 5%;
	}
	#sidebar {
		width:100%;
		margin: 0;
		border-bottom: 1px solid #333;
	}
	#passages {
		padding-top: 2em;
		border-left: 0;
	}
}
</style>
<style id="transitionCSS">
.transition-in {
	opacity:0;
	position:absolute;
}
.passage:not(.transition-out) {
	transition: 1s;
	-webkit-transition: 1s;
}
.transition-out {
	opacity:0 !important;
	position:absolute;
}
</style>
<style id="storyCSS"></style>
<style id="tagCSS"></style>
</head>
<body>
<div id="loadingbar"></div>
<ul id="sidebar">
<li id="title" class="storyElement"><span id="storyTitle" class="storyElement"></span><span id="storySubtitle" class="storyElement"></span><span id="titleSeparator"></span><span id="storyAuthor" class="storyElement"></span></li>
<li id="storyMenu" class="storyElement" style="display:none"></li>
<li><a href="javascript:;" id="snapback">Rewind</a></li>
<li><a href="javascript:;" id="restart">Restart</a></li>
<li><a id="bookmark" title="Permanent link to this passage">Bookmark</a></li>
<li id="credits">
This story was created with <a href="http://twinery.org/">Twine</a> and is powered by <a href="http://tiddlywiki.com/">TiddlyWiki</a>
</li>
</ul>
<div id="snapbackMenu" class="menu"></div>
<div id="passages">
<noscript><div id="noscript">Please enable Javascript to play this story!</div></noscript>
<style>
#sidebar{display:none;}
</style>
</div>
<div id="storeArea" data-size="83" hidden><div tiddler="Sell" tags="moon" created="201411181528" modifier="twee" twine-position="1890,960">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;&lt;&lt;display Price Update&gt;&gt;\n&lt;&lt;if $playerCrops.crop eq 'Cotton'&gt;&gt;\nYou sold &lt;&lt;print $playerCrops.acreage&gt;&gt; &lt;&lt;print $cotton.name&gt;&gt;. \n&lt;&lt;set $cotton.inStore = $cotton.inStore + $playerCrops.acreage&gt;&gt;\nYou made &lt;&lt;set $profit = $cotton.pricePerUnit  * $playerCrops.acreage&gt;&gt;&lt;&lt;print $profit&gt;&gt;&lt;&lt;set $playerCrops.acreage = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Wheat'&gt;&gt;You sold &lt;&lt;print $playerCrops.acreage&gt;&gt; &lt;&lt;print $wheat.name&gt;&gt;&lt;&lt;set $wheat.inStore = $wheat.inStore + $playerCrops.acreage&gt;&gt;\nYou made &lt;&lt;set $profit = $wheat.pricePerUnit  * $playerCrops.acreage&gt;&gt;&lt;&lt;print $profit&gt;&gt;&lt;&lt;set $playerCrops.acreage = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Cannabis'&gt;&gt;You sold &lt;&lt;print $playerCrops.acreage&gt;&gt; &lt;&lt;print $cannabis.name&gt;&gt;&lt;&lt;set $cannabis.inStore = $cannabis.inStore + $playerCrops.acreage&gt;&gt;\nYou made &lt;&lt;set $profit = $cannabis.pricePerUnit  * $playerCrops.acreage&gt;&gt;&lt;&lt;print $profit&gt;&gt;&lt;&lt;set $playerCrops.acreage = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Soybeans'&gt;&gt;You sold &lt;&lt;print $playerCrops.acreage&gt;&gt; &lt;&lt;print $beans.name&gt;&gt;&lt;&lt;set $beans.inStore = $beans.inStore + $playerCrops.acreage&gt;&gt;\nYou made &lt;&lt;set $profit = $beans.pricePerUnit  * $playerCrops.acreage&gt;&gt;&lt;&lt;print $profit&gt;&gt;&lt;&lt;set $playerCrops.acreage = 0&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $playerCrops.crop eq 'Coffee'&gt;&gt;You sold &lt;&lt;print $playerCrops.acreage&gt;&gt; &lt;&lt;print $coffee.name&gt;&gt;&lt;&lt;set $coffee.inStore = $coffee.inStore + $playerCrops.acreage&gt;&gt;\nYou made &lt;&lt;set $profit = $coffee.pricePerUnit  * $playerCrops.acreage&gt;&gt;&lt;&lt;print $profit&gt;&gt;&lt;&lt;set $playerCrops.acreage = 0&gt;&gt;&lt;&lt;endif&gt;&gt;\n\nTotal Cash on Hand: &lt;&lt;set $player1.cash = $player1.cash + $profit&gt;&gt;&lt;&lt;print $player1.cash&gt;&gt;\n\n[[Planting Again]]\n[[Market Shift]]\n[[Buy|Store]]\n&lt;&lt;set $season = $season + 1&gt;&gt;\nConsume\n------------\nCotton: &lt;&lt;set $cotton.inStore = $cotton.inStore - Math.floor(Math.random() * ($colonyPop/2)) + 10&gt;&gt;&lt;&lt;if $cotton.inStore lt 0&gt;&gt;&lt;&lt;set $cotton.inStore = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;print $cotton.inStore&gt;&gt;\nWheat: &lt;&lt;set $wheat.inStore = $wheat.inStore - Math.floor(Math.random() * ($colonyPop/2)) + 10&gt;&gt;&lt;&lt;if $wheat.inStore lt 0&gt;&gt;&lt;&lt;set $wheat.inStore = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;print $wheat.inStore&gt;&gt;\ncannabis: &lt;&lt;set $cannabis.inStore = $cannabis.inStore - Math.floor(Math.random() * ($colonyPop/2)) + 10&gt;&gt;&lt;&lt;if $cannabis.inStore lt 0&gt;&gt;&lt;&lt;set $cannabis.inStore = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;print $cannabis.inStore&gt;&gt;\nSoybeans: &lt;&lt;set $beans.inStore = $beans.inStore - Math.floor(Math.random() * ($colonyPop/2)) + 10&gt;&gt;&lt;&lt;if $beans.inStore lt 0&gt;&gt;&lt;&lt;set $beans.inStore = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;print $beans.inStore&gt;&gt;\nCoffee: &lt;&lt;set $coffee.inStore = $coffee.inStore - Math.floor(Math.random() * ($colonyPop/2)) + 10&gt;&gt;&lt;&lt;if $coffee.inStore lt 0&gt;&gt;&lt;&lt;set $coffee.inStore = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;print $coffee.inStore&gt;&gt;\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;\n\n&lt;&lt;set $playerCrops.acreage = $playerCrops.maxAcres&gt;&gt;&lt;&lt;set $playerCrops.acreage = $playerCrops.maxAcres&gt;&gt;\n&lt;&lt;set $ownerCrops.acreage = $ownerCrops.maxAcres&gt;&gt;&lt;&lt;set $ownerCrops.acreage = $ownerCrops.maxAcres&gt;&gt;</div><div tiddler="Parents Pic" tags="Twine.image" created="201412101722" modifier="twee" twine-position="128,1350">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAADwCAIAAABT1I0hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACrNJREFUeNrs3U+IVdcdB/CxfRFiIaE01O7EdJcaM41RAlG6SNGFVVEKYppSKxEkpNMJLQZjrERbrZLidOjCok1diDIQFJEsdNeqEDRS0VQCpYiFQqfYhaHtwto/0EVKz8/4zlzvve/P+Xx2Hu67990/874e+HJu5/J3nhoZfJvOzUpG7sxdM8Inmz19KhlZuvHowJ3F+SMvOgtnes89x1+A+My3+SsRj16XYX1a2vQplwAAQQgAghAABCEACEIAKEXHJQB6JbY9h1VzDdW6rmHJ7VMzQgCKJggBEIQAIAgBQBACQFm0RoGeaW6t0XLU1UctuX1qRghA0QQhAIIQAAQhAAhCACiL1igAfdc+jZrro5oRAlA0QQiAIAQAQQgAghAAyqI1CkBt6mqfRs2thmpGCEDRBCEAghAABCEACEIAKIvWKNAzJb9ZnplqbjVUM0IAiiYIARCEACAIAUAQAkBZtEaBnqnrnePap+SL7VMzQgCKJggBEIQAIAgBQBACQFm0RgEeyOzpU123ae697ZgRAoAgBABBCACCEAAEIQBk0xoFqFlcQ7Xaaqi6pmaEACAIAUAQAoAgBABBCAC10hoFeqacN8vHHmlz10fX1IwQAAQhAAhCABCEACAIAeATaI3O/JJdfrPCp+4u2unSfaxaF65a7y7HM49cTEbe/2jJwJ3FIN6vuq7GsLZP4/WJz+rE5GTX/cyePtV1m5K7pmaEABRNEAIgCAFAEAKAIASAsrTaGr365e923Wbhb36ajGw6NysZeXvZv9u7QBkd0W1b1iUjuy892dD3yWl/Rf3fB6vrjd455l/dHA6fjlTrkbZ5FuXcL/rnDg5rs9SMEICiCUIABCEACEIAEIQAUJZWW6OxEZqjzY5ojtgRbdNwtLbaXIUyx1/OH0pGPhd6pP1/FuXcL9q5y7FHGlvrw/GLZEYIQNEEIQCCEAAEIQAIQgAoSyeu5FmytWeOJyOnH0u32XvwRDLSZo+0ubVGh2OtyJyzmP/0w8lITke0zetTzrqdVijtZzlN4OFYodSMEICiCUIABCEACEIAEIQAUJbO+NjYUJ7Y/qmb3U8+vH3+5IqdXT+1Y/G1Hp5XXf2rYX3TdJ6zyb/jWqNbZh9JPzRW5RmD4ZazQunW9fP6/G/HjBCAoglCAAQhAAhCABCEAFCWTsnNt7uLdlb41Opbe5ORxTeOeZIGyC/+uDwZuTT/ha6f+t2mH6dDKza4mLW7vvevXbc5cuVLyYgGL2aEACAIAUAQAoAgBABBCAAZOi7B/cV31o9sSRuGsXOoR9or1w8s67rN9ide7npPqz0bJ/VIGxA7omBGCACCEAAEIQAIQgAQhABQSWf29ClX4WMrr/y9lv24qu345tMPh7FlDR3r9S2nk5E9B1e57w14Pvn3xtHfJiOxRxrfgT4xOVnh7/TO3DVugBkhAAhCABCEACAIAUAQAsDw6izdeNRV+J/xdclA7ArmiO3T2xMnXN36Xd2cDMR1ROOV31fpnubw11SHX3bd4v2PljR0L84febHrNpqlZoQAIAgBQBACgCAEAEEIAAPLG+oZYDcWHkqHJtKBR0MTeKSx1igP7pVffzsZ2ffhQ+lI+NRz763vuuecHmncJvZIrShrRggAghAABCEACEIAEIQAMLA6OWvrlWNlY3uO1/nKsbe6fmr0he+7KQ9qdE4y8HqLd7kcOc9zXAk2ylndd8/BVcnIhfCp2CP1W4cZIQAIQgAQhAAgCAFAEAJQvKF9Q31siGWdaVyXsiavfe3xCp+K3/lny//U0Dd85ewX+uteNObw9w43tOey31Df/cl8NzR4Lzw71dC3iXuOPdK67tcg9lHr+qscji6uGSEARROEAAhCABCEACAIAaAs3lDfiNsTJ5KRC2GbC2ddp954afNLtezn4J3z6X0v+KrmtI6vvP18MrL96VUeyJ6IHdGc/mf8VLX9mBECgCAEAEEIAIIQAAQhAPRIba3RnJXr+m3NyRyHD1Val/In36rl6M2tLMqDu7HwkIswI5/dtiQdWpGOzJveW2HP74Z1RJmpnF/j4VhZ1IwQAAQhAAhCABCEAAhCAChY36012ttm6YI3FiQjq29VWZfytZF/eLZmpNV+7PKavvNQXPmcNUKr2ffhQ+nI/NFk5LmMtufNuduSkQPr/5aMvDr1ma77iX3UQeyx99awNkvNCAEomiAEQBACgCAEAEEIAGXxhvr/c+GxXcnI6lulnHvsbdbVJ7xy7K0wVk9H9AfHf1XhU7s2fMWjfp/7HsUnITZCc1TriEY5HdFofGwsGZmYnExG9EjNCAFAEAKAIAQAQQgAghAAhlptrdGcblVd29COaj3SNlcN1f/s1ZOwffzlZOT2xIlk5NHxdemORud0/Xsff+RiMhI7ojlrjeZs841w9GF9AztmhAAgCAFAEAKAIAQAQQgA/9UppyVV8UyfnUoG4nqJF8I2tV3V5ekqndVW18yR08CM53WvdUQpUXw2Vlb61PmwzYGwRmgUO6JxHdF59zh6Y78bmBECgCAEAEEIAIIQAAQhAPSjzp25awbuS8+ePpWMtHkWOcdq7vu0ubrmE6+eS4cqnVdzTVd65dM7wrvmT59u6Fix/xnfNb9/6mYysjVjm7p+W+KnMCMEAEEIAIIQAAQhAAhCAOhLnf7/ir3tiPZW7G1eP7CstWNFOUfP6Yh6s/zw+efuqYb2PF6p/3mPHun6dLXR2EetJv4ixRVKl2486iExIwQAQQgAghAABCEACEIA6LW+a432W0d0z8FV6dCKDRW2qUtOt/PrS/6VjLxzsb/+xxObpb39hmvPHE9GToY7mLPNcDzzFc9idE7Xbaqt23mPbmel65PTEa3ryuuRmhECgCAEAEEIAIIQAAQhAPSlHrdGS15HtDlxJc93Lp5r6FjV3j4fv+GuDb29Zukaqj+quE09R69LTse4Ls31LeOvRF1vhG/z10aP1IwQAAQhAAhCABCEACAIAaAPtNoaLacj2ty6lFHOW+PjNm32Cb2Pvld6e9/rMqy/EnqkZoQAIAgBQBACgCAEAEEIAK3ruAQz1WYjNMrpiFbbT3N9wmrrkeL/vqXJ6ZE+MzbmQvmrAABBCACCEAAEIQAIQgCoqsHWaJsri+5YfC0Z2X3pyVr23GYjNEdv14qMR79+wDqig2TXhv56ori/+Js5MTnpspgRAoAgBABBCACCEAAEIQBUldUazelkxm1GRh4PI9cqfMU/7/1iMvL5bb+v5Tvz4I689wcXYaBtXT8vGdk/ddNl6Vs53fvY2K8mrnS6dONRM0IAEIQAIAgBQBACgCAEgEGW1RrN64j2/alefjMZubtopyfgAWkY9rM21/ulf8S7XFeP1IwQAAQhAAhCABCEACAIAWDAZbVGY+No96W0ldRmj7TiqqGLrDUKpVh75niFT51csaGWYy14Y0Ey8sEPP6jlWNXEHmnOOqJxZFhXHzUjBKBoghAAQQgAghAABCEAlOUerdG61ieM3c6cPcf26c+/Osd9ggpy1pwcjtVHq3VEc/YTu505x4od0Zxjxa5ptV/Ras9GOe+jNyMEAEEIAIIQAAQhAIIQAAo266nR0WSo/1tk3rsN/ppo/9nI6ZHG9un42Fgysn/qphkhAAhCABCEACAIAUAQAkAv/EeAAQBnHv1hoZxRtQAAAABJRU5ErkJggg==</div><div tiddler="Parents Init" tags="earth" created="201412081202" modifier="twee" twine-position="215,1190">&lt;&lt;set //initialize\n$anxiety = 0\n$max_anxiety = 10\n$passes = 0\n$max_passes = 10\n$anxiety_bar = [0,0,0,0,0,0,0,0,0,0]\n$parentSayGrid = [\n['&quot;I was too busy trying to run away from dad that I was too focused on my own survival,&quot; Your mom says.',1],\n['Palooka wanders over to your leg and drops his muzzle on your knee. You skritch his big nose. &lt;br&gt;&lt;br&gt;&quot;The vet says she can remove that leg tumor if it\s's starting to bother him,&quot; your mother says.',2],\n['&quot;We got this Jew fella at work, and he always needs time off,&quot; your father volunteers. &quot;Crazy holidays, just six or seven days right in the middle of spring. And this special food he has to eat. Not when we were kids, that would never have happened when the war was on.&quot;', 3] ,\n['&quot;All those brave rescue dogs that died on 9/11, sometimes I wake up thinking about them and have to cry myself back to sleep, if it\s's not already morning.&quot;',2],\n['Do you still watch that show?', -2]\n['&quot;After I\s'm dead, you\s'll have to call your father every day to keep him from killing himself.&quot;', -2] \n]\n&gt;&gt;\n</div><div tiddler="Specific Stylesheet" tags="script" created="201411171142" modifier="twee" twine-position="20,551">(function(){ var render2 = Passage.prototype.render; Passage.prototype.render = function () { var b = render2.call(this); var t = this.tags.join(&quot; &quot;); document.body.setAttribute(&quot;data-tags&quot;, t); return b; }}());</div><div tiddler="Test Styler" tags="earth" created="201412111820" modifier="twee" twine-position="576,163">&lt;div id=&quot;bg-test&quot; style=&quot;background-image:[img[CompBG]]; background-position:bottom;height:250px;width:310px;background-repeat: repeat-x;&quot;&gt;\nI am a test.\n&lt;/div&gt;</div><div tiddler="AnxietyMeter" tags="Twine.image" created="201412101726" modifier="twee" twine-position="156,195">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD9JREFUeNrszgENADAIA7Bx/zbQCTZO0ipoTedDL9HS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK61FoBBgBDswIIXlnoPgAAAABJRU5ErkJggg==</div><div tiddler="Samizdat Done" tags="moon" created="201412122107" modifier="twee" twine-position="2293,1124">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;print $playerNovel&gt;&gt;\n&lt;&lt;set $sentence = $sentence + 1&gt;&gt;\n[[Harvest]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="Background Test" tags="earth" created="201411241557" modifier="twee" twine-position="14,947">&lt;div id=&quot;bg-test&quot; style=&quot;background-image: [img[stars-bg]];height:100px;width:400px;&quot;&gt;\nTest Text Here.\n&lt;/div&gt;\n[img[lunarsurface]]</div><div tiddler="colony" tags="Twine.image" created="201411251334" modifier="twee" twine-position="1151,603">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPFJREFUeNpi1DcwYKAL8LpwAc7eRshSJoZBCUadRQpgoUpawQWQ09A2UhLxaCSOiLSFKw0Rk1bI1jsaiSOu3NpGYgWKrJ6Ycm40Eod/2iKpbURhOsNq/mgk0qiAuGB9iypWGhxVo2F7CxlUTf0GZ7dlc40WEIMtbVErSSEbWHWBLmmLKulpNG1R0VlUT0wEkxoEEU5byGmFWmUSSeaMpi0yyi06pyeCBSQL7dIHmvrRcotmgPHd3934VXQzu2IVLyWkkRK9hJ1FqpWkOn00bVFebr1n2Eg708k2nPHu35zRSBx11qizRp016qzh6iyAAAMAzkJQic4ql+UAAAAASUVORK5CYII=</div><div tiddler="Loose Moon Passage Text" tags="" created="201411171231" modifier="twee" twine-position="746,34">We're not supposed to ever call it &quot;Earth&quot; here, that's the first thing you should learn.\n\nThey want us to call that place &quot;Before.&quot; Some former ad executive thought that up. It was ridiculous at first, but now it's almost working. \n\nYou definitely never call it &quot;Home.&quot; Home is here. It's not &quot;The Moon,&quot; either. Moon of what? Satellite of whom? By whose eyes? It's Luna, Mona, or Selene. And Selene is at war with Before. Before is a past that does not understand it is the past yet. Before is a hungry blue ghost chasing us but falling behind forever.\n\n***\n\nNewfound Lunar patriotism meant that almost every girl in that first generation had a name that was Luna, Mona, Selene. Not a lot of Elizabeths, Carols, or JoAnnes. \n\nThe first women on Luna thought they were going to menstruate to death. Constant forever bleeding, cramps worse than they had ever been. Half the pioneer workforce laid low immediately on landing, right when they were needed most. For all the universal terraforming provisions in huge unbranded government regulation bins, no sanitary napkins. The very concept of menstruation too messy and imprecise for the all-male generals and scientists to consider until it had been overlooked entirely. \n\nA planet of bleeding women, doubled over, working anyway. Miserable and forced to work anyway, the entire enterprise looking more and more unlikely. \n\nAnd then it passed. Six weeks of uterine purging, now resolved. It was the end of the age of glamor and the beginning of the unravelling of gender altogether. \n\n***\nI've seen enough blood and death, I know what's coming.\n\n\n </div><div tiddler="CompBG" tags="Twine.image" created="201412161140" modifier="twee" twine-position="1304,849">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAFoCAIAAAAElhK7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABldJREFUeNrs3TFO21AYwPG2MuoJWJFsiTOAxBWSBalbB5SJtRkoDJ06gDLQlck9QKUscAUGegUkvwPkBIilY1tD20BJnu3v9xvfYuUR8dcnfXJef63rV0BU50cTlxDQdOY//09vXAEAQggAQggAQggAQggAURSuAIA+alJqnVRlaSIEACEEACEEACEEACEEgD+zNQpALz1vR9RECABCCABCCABCCIAQAoAQAoAQAoAQAoAQAoAQAoAQAoAQAoAQAoAQAoAQAoAQAoAQAkDPFaPx2C1ARleXly4BTIQAIIQAIIQAIIQAIIQAsHqFK4DIprM649PfNlcZn356MfcFeJImpdZJVZYmQgAQQgAQQgAQQgAQQgDoD1ujACxlGDuiJkIAEEIAEEIAEEIAhBAAAiv8Ojaszmg8dglgIgQAIQQAIQQAIQQAIQSAbig+70/cAryIT/PaJcCLaFJqnazuTacmQgBCE0IAhBAAhBAAhBAAYilu7hduAZ5hZ2PTJcCKrG5H1EQIAEIIAEIIAEIIgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACgBACQM8VrgAia1Jqnazzl8HzOjncz/j004u5r5+JEACEEACEEACEEACEEADWy9YohBZnRxRMhAAghAAghAAghAAghACEZ2sUgGcaxrtqTYQAhCaEAAghAAghAAghAMRiaxSAZxrGu2pNhACEJoQACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEACCEAdFHhCoCYTi/mYT/77eQs49O36+O1PatJqXVSlaWJEACEEACEEACEEAAhBICobI1CIMts0MGQLPMNNxECEJoQAiCEACCEACCEABCLrVEIxI4omAgBQAgBQAgBQAgBEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIA6IDCFQC/alJqnVRlOchPenK4n/Hpd9Uo7Hfs/GiS8enTWW0iBAAhBAAhBAAhBEAIASAqW6PAb4a6IwomQgAQQgAQQgAQQgAQQgCE0BUAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQAIIQA0BmFK4ChalJqnVRl6Vrw3TARAoAQAoAQAoAQAiCEABCVrVEYrO7vAd5Vo4xPf/d9L+PTv1XXYb8b01md8ekHu1smQgAQQgAQQgAQQgCEEACEEACEEACEEACEEACEEACEEACGy7tGAcisSal1ss63oZoIAQhNCAEQQgAQQgAQQgCIxdYoAJmtc0fURAgAQggAQggAQgiAEAKAEAKAEAKAEAKAEAKAEAKAEALAoHnXKJBN3t8ld6uYCAFACAEQQgAQQgAQQgAIxtYo9NIwNgM/Lt63jxZR/oK3k7P1PevByXZ9nPGzH+xumQgBQAgBQAgBQAgBQAgBIAdbo9BL3h4JJkIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAEEIAhBAAhBAAhBAAhBAAhBAAhBAAhBAAhBAAhBAAhBAAhBAAhBAAhBAAhBAAeqtwBcDfNSm1TqqydC29drC75RJMhAAghAAIoSsAQAgBQAgBIB5bo8A/2BHFRAgAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAQggAT1S4Aui+JqXWSVWWrgVMhAAghAAghAAghAAghADwFLZGoQfsiIKJEACEEACEEACEEACEEAD+W7GzsekWADARAoAQAoAQAoAQAoAQAsDQFTf3C7cAL2Mc96M3KbVOvB8VEyEACCEACCEACCEACCEAdIxfqIdHPHwH7zL71V8291onHxbXQW7MjigmQgAQQgAQQgAQQgAQQgAQQgAQQgAQQgAQQgAQQgAQQgDoAO8ahUcs82bRh/K+WdRvxIOJEACEEACEEACEEACEEAD+6ocAAwAyOn7emo21jQAAAABJRU5ErkJggg==</div><div tiddler="Planting Again" tags="moon" created="201411211545" modifier="twee" twine-position="1776,1128">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;display Price Update&gt;&gt;\n&lt;&lt;display Seed Pricing&gt;&gt;\nSeason: &lt;&lt;print $season&gt;&gt;&lt;&lt;endnobr&gt;&gt;\nColony Population Rating: &lt;&lt;print $colonyPop&gt;&gt;\n\n&lt;&lt;display Population Growth&gt;&gt;\n&lt;&lt;display Penalties&gt;&gt;\n\nCurrent Trading Prices\nCotton: $&lt;&lt;print $cotton.pricePerUnit&gt;&gt;\nCannabis: $&lt;&lt;print $cannabis.pricePerUnit&gt;&gt;\nWheat: $&lt;&lt;print $wheat.pricePerUnit&gt;&gt;\nSoybeans: $&lt;&lt;print $beans.pricePerUnit&gt;&gt;\nCoffee: $&lt;&lt;print $coffee.pricePerUnit&gt;&gt;&lt;&lt;set $cropRatio = [$cotton, $cannabis, $wheat, $coffee, $beans]&gt;&gt;&lt;&lt;set $cropRatio = $cropRatio.sort(function(a, b){return a.ratio-b.ratio})&gt;&gt;\n\n\nThe Agricultural Commission has instructed you to grow &lt;&lt;$ownerCrops.acreage&gt;&gt; of &lt;&lt;print $cropRatio[0].name&gt;&gt; this season due to shortages.\n\nWhat will you plant for the &lt;&lt;$playerCrops.acreage&gt;&gt; acres you control?\nYou have $&lt;&lt;print $player1.cash&gt;&gt;.\n&lt;&lt;if $player1.cash gt $cropRatio[4].pricePerSeed&gt;&gt;\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $cotton.pricePerSeed gt 0&gt;&gt;[[Cotton|Plant Cotton]]: $&lt;&lt;print $cotton.pricePerSeed &gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $cannabis.pricePerSeed gt 0&gt;&gt;[[Cannabis|Plant Marijuana]]: $&lt;&lt;print $cannabis.pricePerSeed&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $wheat.pricePerSeed gt 0&gt;&gt;[[Wheat|Plant Wheat]]: $&lt;&lt;print $wheat.pricePerSeed&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $beans.pricePerSeed gt 0&gt;&gt;[[Soybeans|Plant Soybeans]]: $&lt;&lt;print $beans.pricePerSeed&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $coffee.pricePerSeed gt 0&gt;&gt;[[Coffee|Plant Coffee]]: $&lt;&lt;print $coffee.pricePerSeed&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n&lt;&lt;else&gt;&gt;\nYou can't afford any seed this season. \n[[Earn Money]]\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $ownerCrops.quality = $ownerCrops.quality + 1&gt;&gt;\n&lt;&lt;set $ownerCrops.crop = $cropRatio[0].name&gt;&gt;\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="Start" tags="" created="201411161312" modifier="twee" twine-position="10,10">[[New Game]]\n[[Credits]]\n[[Test Styler]]\n[[Soundtrack Test]]</div><div tiddler="Add" tags="earth" created="201412130038" modifier="twee" twine-position="879,1384">&lt;table id=&quot;spreadsheet&quot;&gt;\n&lt;tr&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;th style=&quot;width:20px;&quot;&gt;&amp;nbsp;&lt;/th&gt;&lt;th style=&quot;width:150px;&quot;&gt;A&lt;/th&gt;&lt;th style=&quot;font-weight:bold;border-bottom:2px solid #000000;border-right:2px solid #000000; width:150px;&quot;&gt;B&lt;/th&gt;&lt;th style=&quot;width:150px;&quot;&gt;C&lt;/th&gt;&lt;th style=&quot;width:150px;&quot;&gt;D&lt;/th&gt;&lt;th style=&quot;width:150px;&quot;&gt;E&lt;/th&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;1&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;2&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;3&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;&lt;print $spreadsheet&gt;&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece; font-weight:bold; border-bottom:2px solid #000000;&quot;&gt;4&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td style=&quot;border: 4px solid #000000;&quot;&gt;&lt;&lt;textinput $spreadsheet&gt;&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;5&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;6&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tr&gt;&lt;/table&gt;\n&lt;&lt;button [[Add]]&gt;&gt;</div><div tiddler="Plant Coffee" tags="moon" created="201411261526" modifier="twee" twine-position="2097,439">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;if  $player1.cash - ($playerCrops.maxAcres * $coffee.pricePerSeed) gte 0&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Coffee'&gt;&gt;\nYou can grow &lt;&lt;print $playerCrops.maxAcres&gt;&gt; acres of &lt;&lt;print $coffee.name&gt;&gt;. It costs $&lt;&lt;set $cost = $playerCrops.maxAcres * $coffee.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $player1.cash - ($playerCrops.maxAcres * $coffee.pricePerSeed) lt 0&gt;&gt;\nYou can't afford 10 acres of &lt;&lt;print $coffee.name&gt;&gt;.\nYou can afford &lt;&lt;print Math.floor($player1.cash/$coffee.pricePerSeed)&gt;&gt; acres.\n&lt;&lt;set $playerCrops.acreage = Math.floor($player1.cash/$coffee.pricePerSeed)&gt;&gt; \n\nIt costs $&lt;&lt;set $cost = $playerCrops.acreage * $coffee.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $player1.cash = $player1.cash - $cost&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Coffee'&gt;&gt;\nYou are growing &lt;&lt;print $playerCrops.acreage&gt;&gt; acres of &lt;&lt;print $playerCrops.crop&gt;&gt;.\nRemaining Cash: $&lt;&lt;print $player1.cash&gt;&gt;\n[[Farm Debug]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="Parents" tags="earth" created="201412081201" modifier="twee" twine-position="263,1340">[img[Parents Pic]]\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $passes eq 0&gt;&gt;\n&lt;&lt;display Parents Init&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $anxiety lt 0&gt;&gt;\n&lt;&lt;set $anxiety =0&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;p class=&quot;vgfont&quot; style=&quot;padding-top: 0px; margin-top: 0px;&quot;&gt;Anxiety:&lt;/p&gt;&lt;&lt;display Display Graph&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n&lt;&lt;if $anxiety gte $max_anxiety&gt;&gt;\n&lt;&lt;nobr&gt;&gt;\nIt's getting to be too much.&lt;br&gt; \n&quot;Well, thanks for having me over,&quot; you say.&lt;br&gt; \n&quot;You have to go so soon?&quot; your mom asks. There is a kind of desperation in her question and if you think about it too much you will erupt.&lt;br&gt;\n&quot;It was nice seeing you. We shouldn't let it go so long between your visits,&quot; your dad says and he hugs you. &quot;I love you,&quot; he whispers into your ear. \n&lt;br&gt;&lt;br&gt;\nAnd then you are walking down the stairs of their complex, knowing they are watching you leave from the window, and waving but too teeth-grindingly anxious to look back and mark yourself with more guilt tonight.\n&lt;br&gt;&lt;br&gt;\nYou did not get a check. Now you're angry with yourself /and/ ashamed. \n&lt;br&gt;&lt;br&gt;\nThere's nothing to do but go out and treat yourself anyway.\n[[This part is over|Parent Fail]]\n&lt;&lt;endnobr&gt;&gt;\n&lt;&lt;else&gt;&gt;\n&lt;&lt;if  $passes gte $max_passes&gt;&gt;\nYou get a check. \n[[This part is over|Parent Success]]\n&lt;&lt;else&gt;&gt;\n&lt;&lt;display Parents Say&gt;&gt;\n&lt;&lt;set $passes = $passes + 1&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endif&gt;&gt;</div><div tiddler="Starfighter Debug" tags="earth" created="201411191320" modifier="twee" twine-position="486,862">&lt;&lt;display Starfighter Init&gt;&gt;\s\n&lt;&lt;nobr&gt;&gt;&lt;&lt;set $map = [[$slot1, $slot2, $slot3, $slot4, $slot5],\n\t\t[$slot6, $slot7, $slot8, $slot9, $slot10],\n\t\t[$slot11, $slot12, $slot13, $slot14, $slot15],\n\t\t[$slot16, $slot17, $slot18, $slot19, $slot20]\n\t\t]&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $fighter&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;&lt;div id=&quot;compbg&quot; style=&quot;width:600px;height:360px;background-image:[img[CompBG]];background-repeat:none;&quot;&gt;&lt;&lt;display Control Panel&gt;&gt;&lt;/div&gt;</div><div tiddler="Improve Crops" tags="moon" created="201411301236" modifier="twee" twine-position="2571,565">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\nYou purchase parts to upgrade the irrigation system in your crops and prevent crop dieoff.\nOld Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;\n&lt;&lt;set $playerCrops.quality = $playerCrops.quality + Math.floor(Math.random() * 10) + 4&gt;&gt;\nNew Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;\n&lt;&lt;set $player1.cash = $player1.cash - 400&gt;&gt;\nNew Cash on Hand: &lt;&lt;print $player1.cash&gt;&gt;\n[[Return to Store Menu|Store]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="Display Crops" tags="" created="201411171254" modifier="twee" twine-position="1523,103">&lt;&lt;if $cropsDisplay eq 0&gt;&gt;\n&lt;&lt;print $allCrops[0].name&gt;&gt;\nPrice Per Unit: &lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $allCrops[0].pricePerUnit = Math.round(0.5*(Math.pow(($allCrops[0].inStore - $cotton.need), 2))) &gt;&gt;\n&lt;&lt;if $cotton.pricePerUnit gt 0&gt;&gt;\n&lt;&lt;print $cotton.pricePerUnit&gt;&gt;\n&lt;&lt;else&gt;&gt;\nWe're not buying &lt;&lt;print $cotton.name&gt;&gt; at this time.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\nOn Hand:&lt;&lt;print $allCrops[$cropsDisplay].onHand&gt;&gt;\nIn Store:&lt;&lt;print $allCrops[$cropsDisplay].inStore&gt;&gt;\nNeed: &lt;&lt;print $allCrops[$cropsDisplay].need&gt;&gt;\n&lt;&lt;else&gt;&gt;\n&lt;&lt;print $allCrops[$cropsDisplay].name&gt;&gt;\nPrice Per Unit: &lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $allCrops[$cropsDisplay].pricePerUnit = Math.round(0.5*(Math.pow(($allCrops[$cropsDisplay].inStore - $allCrops[$cropsDisplay].need), 2))) &gt;&gt;\n&lt;&lt;if $allCrops[$cropsDisplay].pricePerUnit gt 0&gt;&gt;\n&lt;&lt;print $allCrops[$cropsDisplay].pricePerUnit&gt;&gt;\n&lt;&lt;else&gt;&gt;\nWe're not buying &lt;&lt;print $allCrops[$cropsDisplay].name&gt;&gt; at this time.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\nOn Hand:&lt;&lt;print $allCrops[$cropsDisplay].onHand&gt;&gt;\nIn Store:&lt;&lt;print $allCrops[$cropsDisplay].inStore&gt;&gt;\nNeed: &lt;&lt;print $allCrops[$cropsDisplay].need&gt;&gt;\n&lt;&lt;set $cropsDisplay = $cropsDisplay - 1&gt;&gt;\n&lt;&lt;display Display Crops&gt;&gt;\n&lt;&lt;endif&gt;&gt;</div><div tiddler="Office Init" tags="earth" created="201412091241" modifier="twee" twine-position="1053,1066">&lt;&lt;set //initialize\n$officeEventGrid = [\n['Something happens.'],\n['Something else happens.'],\n['A third thing.']\n]\n\n$passes = 0\n&gt;&gt;</div><div tiddler="Price Update" tags="moon" created="201411222115" modifier="twee" twine-position="1807,103">&lt;&lt;nobr&gt;&gt;\n/%Set Ratio%/\n&lt;&lt;set $cotton.ratio = $cotton.inStore/$cotton.need&gt;&gt;&lt;&lt;set $cannabis.ratio = $cannabis.inStore/$cannabis.need&gt;&gt;&lt;&lt;set $wheat.ratio = $wheat.inStore/$wheat.need&gt;&gt;&lt;&lt;set $coffee.ratio = $coffee.inStore/$coffee.need&gt;&gt;&lt;&lt;set $beans.ratio = $beans.inStore/$beans.need&gt;&gt;\n/%Set Price%/\n&lt;&lt;set $cotton.pricePerUnit = Math.floor(100 * Math.pow(($cotton.inStore / $cotton.need - 1),2))&gt;&gt;&lt;&lt;set $wheat.pricePerUnit = Math.floor(100 * Math.pow(($wheat.inStore / $wheat.need - 1),2))&gt;&gt;&lt;&lt;set $cannabis.pricePerUnit = Math.floor(100 * Math.pow(($cannabis.inStore / $cannabis.need - 1),2))&gt;&gt;&lt;&lt;set $coffee.pricePerUnit = Math.floor(100 * Math.pow(($coffee.inStore / $coffee.need - 1),2))&gt;&gt;&lt;&lt;set $beans.pricePerUnit = Math.floor(100 * Math.pow(($beans.inStore / $beans.need - 1),2))&gt;&gt;&lt;&lt;if $cotton.ratio gte 1&gt;&gt;&lt;&lt;set  $cotton.pricePerUnit = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $cannabis.ratio gte 1&gt;&gt;&lt;&lt;set  $cannabis.pricePerUnit = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $wheat.ratio gte 1&gt;&gt;&lt;&lt;set  $wheat.pricePerUnit = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $coffee.ratio gte 1&gt;&gt;&lt;&lt;set  $coffee.pricePerUnit = 0&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $beans.ratio gte 1&gt;&gt;&lt;&lt;set  $beans.pricePerUnit = 0&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;</div><div tiddler="AnxietyMeterSafe" tags="Twine.image" created="201412111812" modifier="twee" twine-position="408,323">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEBJREFUeNrszgENADAIA7BxKfgXhwRsnKRV0OrJh16ipaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWldam1AgwAcR8Bdqb6QW8AAAAASUVORK5CYII=</div><div tiddler="Display Graph" tags="earth" created="201412081550" modifier="twee" twine-position="433,1166">&lt;&lt;nobr&gt;&gt;&lt;&lt;set $anxiety_bar = ['[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]','[img[AnxietyMeterSafe]]']&gt;&gt;\n&lt;&lt;set $starter = 0&gt;&gt;\n&lt;&lt;set $temp = $anxiety&gt;&gt;\n&lt;&lt;display Bar Grow&gt;&gt;\n&lt;&lt;print $anxiety_bar[0]&gt;&gt;&lt;&lt;print $anxiety_bar[1]&gt;&gt;&lt;&lt;print $anxiety_bar[2]&gt;&gt;&lt;&lt;print $anxiety_bar[3]&gt;&gt;&lt;&lt;print $anxiety_bar[4]&gt;&gt;&lt;&lt;print $anxiety_bar[5]&gt;&gt;&lt;&lt;print $anxiety_bar[6]&gt;&gt;&lt;&lt;print $anxiety_bar[7]&gt;&gt;&lt;&lt;print $anxiety_bar[8]&gt;&gt;&lt;&lt;print $anxiety_bar[9]&gt;&gt;&lt;&lt;endnobr&gt;&gt;</div><div tiddler="Earth Notes" tags="" created="201412071043" modifier="twee" twine-position="596,524"></div><div tiddler="Starfighter Init" tags="" created="201411191322" modifier="twee" twine-position="453,540">&lt;&lt;set //initialize\n$fighter = {\n\tdisplay: '[img[fighter]]',\n\tsolid: 1,\n\tx: 2,\n\ty: 0\n}\n\n$space = {\n\tdisplay: '[img[blank]]',\n\tsolid: 0\n}\n\n$ground1 = {\n\tdisplay: '[img[surface1]]',\n\tsolid: 1\n}\n\n\n$ground2 = {\n\tdisplay: '[img[surface2]]',\n\tsolid: 1\n}\n\n\n$ground3 = {\n\tdisplay: '[img[surface3]]',\n\tsolid: 1\n}\n\n$colonyLive = {\n\tdisplay: '[img[colony]]',\n\tsolid: 1\n}\n\n$slot1 = $space\n$slot2 = $space\n$slot3 = $space\n$slot4 = $space\n$slot5 = $space\n$slot6 = $space\n$slot7 = $space\n$slot8 = $space\n$slot9 = $space\n$slot10 = $space\n$slot11 = $space\n$slot12 = $space\n$slot13 = $space\n$slot14 = $space\n$slot15 = $space\n$slot16 = $ground1\n$slot17 = $colonyLive\n$slot18 = $ground1\n$slot19 = $space\n$slot20 = $colonyLive\n\n\n$map = [[$slot1, $slot2, $slot3, $slot4, $slot5],\n\t\t[$slot6, $slot7, $slot8, $slot9, $slot10],\n\t\t[$slot11, $slot12, $slot13, $slot14, $slot15],\n\t\t[$slot16, $slot17, $slot18, $slot19, $slot20]\n\t\t]\n&gt;&gt;</div><div tiddler="Market Shift" tags="moon" created="201411181547" modifier="twee" twine-position="2035,959">&lt;&lt;display Farm Init&gt;&gt;\n&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold;font-size: 0.8em; &quot;&gt;\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $shiftRoll = Math.floor(Math.random() * 8) + 1 &gt;&gt;\n&lt;&lt;set $shiftRoll = 1&gt;&gt;\n&lt;&lt;if $shiftRoll eq 1&gt;&gt;\nFamine&lt;br&gt;&lt;br&gt;\nWe need wheat badly.&lt;br&gt;\nWheat Need: &lt;&lt;print $wheat.need&gt;&gt;&lt;br&gt;\n&lt;&lt;set $wheat.need = $wheat.need + 100&gt;&gt;\nNew Wheat Need: &lt;&lt;print $wheat.need&gt;&gt;&lt;br&gt;\nWheat Price: &lt;&lt;print $wheat.pricePerUnit&gt;&gt;&lt;br&gt;&lt;br&gt;\nWe need soybeans badly.&lt;br&gt;\nSoybeans Need: &lt;&lt;print $beans.need&gt;&gt;&lt;br&gt;\n&lt;&lt;set $beans.need = $beans.need + 100&gt;&gt;\nNew Soybeans Need: &lt;&lt;print $beans.need&gt;&gt;&lt;br&gt;&lt;br&gt;\n&lt;&lt;display Price Update&gt;&gt;\nNew Wheat Price: &lt;&lt;print $wheat.pricePerUnit&gt;&gt;&lt;br&gt;\n&lt;&lt;display Need Increase&gt;&gt;\nNew New Wheat Need: &lt;&lt;print $wheat.need&gt;&gt;&lt;br&gt;\nNew New Wheat Price: &lt;&lt;print $wheat.pricePerUnit&gt;&gt;&lt;br&gt;\nNew New Soybeans Need: &lt;&lt;print $beans.need&gt;&gt;&lt;br&gt;\nNew New Soybeans Price: &lt;&lt;print $beans.pricePerUnit&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $shiftRoll eq 2&gt;&gt;\nTraitors Found!&lt;br&gt;&lt;br&gt;\n&lt;&lt;set $revolutionaries = Math.floor(Math.random() * 15) + 5&gt;&gt;\nA cell of &lt;&lt;$revolutionaries&gt;&gt; revolutionary capitalist agitators were discovered and purged. Their acreage and supplies have been re-allocated.\nThe Records Commission has purged their names, but their crimes and bodies are publicly displayed for a week.\n&lt;br&gt;\nOld Colony Population: &lt;&lt;print $colonyPop&gt;&gt;&lt;br&gt;\n&lt;&lt;set $colonyPop = $colonyPop - $revolutionaries&gt;&gt;\nNew Colony Population: &lt;&lt;print $colonyPop&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $shiftRoll eq 3&gt;&gt;\nIrrigation &lt;br&gt;&lt;br&gt;\nThe Water Commission reports massive under production and water losses from Before attacks on reservoirs and irrigation systems. To get back to optimum levels, the entire colony will be on low-water rations for at least the next two seasons. The crop quality is expected to suffer, along with higher fire risk. &lt;br&gt;\nOld Player Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;&lt;br&gt;\nOld Owner Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;&lt;br&gt;\n&lt;&lt;set $playerCrops.quality = $playerCrops.quality - 2&gt;&gt;&lt;&lt;set $ownerCrops.quality = $ownerCrops.quality - 2&gt;&gt;\nNew Player Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;&lt;br&gt;\nNew Owner Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;&lt;br&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $shiftRoll eq 4&gt;&gt;\nFlooding&lt;br&gt;&lt;br&gt;\nThere's major damage to the irrigation system and flooding damages your farmland this season. A Water Commission investigation reveals Before saboteurs are behind the leakage and crop damage, not faulty repairs and outdated technology.&lt;br&gt;\nOld Player Acreage: &lt;&lt;print $playerCrops.acreage&gt;&gt;&lt;br&gt;\nOld Owner Acreage:  &lt;&lt;print $ownerCrops.acreage&gt;&gt;&lt;br&gt;\n&lt;&lt;set $playerCrops.acreage = Math.floor($playerCrops.acreage * 0.5)&gt;&gt;\n&lt;&lt;set $ownerCrops.acreage = Math.floor($ownerCrops.acreage * 0.5)&gt;&gt;\nNew Player Acreage: &lt;&lt;print $playerCrops.acreage&gt;&gt;&lt;br&gt;\nNew Owner Acreage:  &lt;&lt;print $ownerCrops.acreage&gt;&gt;&lt;br&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $shiftRoll eq 5&gt;&gt;\nDome Assault&lt;br&gt;\nA Before rocket makes it through the defense grid and gets a few laser blasts off before crash landing into the dome of your pod and exploding. There is no pilot to the rocket: these new rockets are entirely automated, piloted from back on planet. That's how they are: Wars at a distance, lines on a screen for the glassy-eyed.&lt;br&gt;\nHuge shards of curved domeglass half-melted into the hardpan, gravity and atmosphere gone all loose.  &lt;br&gt;\nOld Player Acreage: &lt;&lt;print $playerCrops.acreage&gt;&gt;&lt;br&gt;\nOld Owner Acreage:  &lt;&lt;print $ownerCrops.acreage&gt;&gt;&lt;br&gt;\n&lt;&lt;set $playerCrops.acreage = Math.floor($playerCrops.acreage * 0.5)&gt;&gt;\n&lt;&lt;set $ownerCrops.acreage = Math.floor($ownerCrops.acreage * 0.5)&gt;&gt;\nNew Player Acreage: &lt;&lt;print $playerCrops.acreage&gt;&gt;&lt;br&gt;\nNew Owner Acreage:  &lt;&lt;print $ownerCrops.acreage&gt;&gt;&lt;br&gt;\nOld Player Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;&lt;br&gt;\nOld Owner Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;&lt;br&gt;\n&lt;&lt;set $playerCrops.quality = $playerCrops.quality - 2&gt;&gt;&lt;&lt;set $ownerCrops.quality = $ownerCrops.quality - 2&gt;&gt;\nNew Player Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;&lt;br&gt;\nNew Owner Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;&lt;br&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $shiftRoll eq 6&gt;&gt;\nFire&lt;br&gt;&lt;br&gt;\nYou wake up late in the night at the fire sirens. The dry crops and the hyperoxygenated atmosphere means the fire burn and roll over the land like the devil's ocean. Fire repellant foam sprays from up on the cloud layer like Hollywood snow.&lt;br&gt;\nFor weeks after you have a bad cough and sooty mucus. &lt;br&gt;\nOld Player Acreage: &lt;&lt;print $playerCrops.acreage&gt;&gt;&lt;br&gt;\nOld Owner Acreage:  &lt;&lt;print $ownerCrops.acreage&gt;&gt;&lt;br&gt;\n&lt;&lt;set $playerCrops.acreage = Math.floor($playerCrops.acreage * 0.3)&gt;&gt;\n&lt;&lt;set $ownerCrops.acreage = Math.floor($ownerCrops.acreage * 0.3)&gt;&gt;\nNew Player Acreage: &lt;&lt;print $playerCrops.acreage&gt;&gt;&lt;br&gt;\nNew Owner Acreage:  &lt;&lt;print $ownerCrops.acreage&gt;&gt;&lt;br&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $shiftRoll eq 7&gt;&gt;\nBlight&lt;br&gt;&lt;br&gt;\nThere are foul-stinking lesions in your crops. It spreads quickly, terribly. You can only destroy acres and hope you get it all.&lt;br&gt;\nOld Player Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;&lt;br&gt;\nOld Owner Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;&lt;br&gt;\n&lt;&lt;set $playerCrops.quality = $playerCrops.quality - 2&gt;&gt;&lt;&lt;set $ownerCrops.quality = $ownerCrops.quality - 2&gt;&gt;\nNew Player Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;&lt;br&gt;\nNew Owner Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;&lt;br&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;br&gt;[[Planting Again]]\n&lt;&lt;endnobr&gt;&gt;\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;\n</div><div tiddler="moon" tags="Twine.image" created="201411171610" modifier="twee" twine-position="402,11">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfQAAAH0CAIAAABEtEjdAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACQVJREFUeNrs3L2VKkcUhdEerY6ECCqCzoAIJo42xxqz4yACMsBrryIgFulJth4X6U5RXexts/gp4FtlnXnf9wmAsfzhCADEHQBxB0DcARB3AMQdQNwBEHcAxB0AcQdA3AHe3ewIeEopJ4eQq9a7Q8DNHQBxBxB3AMQdAHEHQNwBEHcAxB1A3AEQdwDEHQBxB+Ahw2GHl7jkdT5/Os/r9XLcbzDCTpmbOwDiDoC4AyDuAIg7gLgDIO4AiDsA4g6AuAMg7gDv4WPfd6fQ3tfX18PHBEdOGg/CtJ9eSWQ8J/cbNFPj5g6AuAMg7gCIO4C4AyDuAIg7AOIOgLgDiDsA4g6AuAPQkuGwZJFFsENLnJ1qP+PV5+pZn3Nm9sXc3AEQdwDEHQBxB0DcAcQdAHEHQNwBEHcAxB1A3AE4ONsyvww/CMNLtJ+ySZyp6XOHx0yNmzuAuAMg7gCIOwDiDoC4AyDuAOIOgLgDIO4AiDsA4g7wzubhP2Epp7E/YGTgKXFPiqP/GIb/OxsXc3MHEHcAxB0AcQdA3AEQdwBxB0DcARB3AMQdAHEH4G8H3pYxGkPngpM+fX7Rt1vNeqplKR2WYfgJGjd3AHEHQNwBEHcAxB0AcQcQdwDEHQBxB0DcARB3AHF3BADjmYf/hMHxJu8cfkhkg6zxuJibOwDiDoC4AyDuAIg7gLgDIO4AiDsA4g6AuAMg7gBvoNNtmVJODx9z6OmVdV1bvlxwuMOaTbfafzXX6+XhYyKjMUHBp0qcoIlEpta7mzsA4g6AuAMg7gDiDoC4AyDuAIg7AOIOgLgDiDsA4g5AP1oPh0XGeqY3WLDatq3lyy3LxW89V2RXK6jPX3viKFjsJ1o6PIRgr/rcF3NzBxiQuAOIOwDiDoC4AyDuAIg7gLgDIO4AiDsA4g7Ac+Y+31ZkuGP4/Rln1bPIkSbuz7TXeP5omtbIg/qcoHFzB0DcARB3AMQdQNwBEHcAxB0AcQdA3AHEHQBxB0DcAWgjczislJMDbS9xFKzx0FX7OTMjay+xruvYHzCSvlrvbu4AiDsA4g4g7gCIOwDiDoC4AyDuAOIOgLgDIO4AtDUf960Hh1CGnwppPAjD0b9B4zlu7gCIOwDiDoC4AyDuAOIOgLgDIO4AiDsA4g6AuAOIOwAHNTuCbrVfBGs8KdXn5Nnwx96nZSkOwc0dAHEHEHcAxB0AcQdA3AEQdwDEHUDcARB3AMQdgFShbZlSTh2+9eEXOUyOpJ9DZDem8cu9g23bHj5mWQY/q2BFa727uQMg7gDiDoC4AyDuAIg7AOIOgLgDiDsA4g6AuAMg7gD8m7nPt3W7Vd9Nnw49htV4i830W/pZ2WJzcwcQdwDEHQBxB0DcARB3AMQdQNwBEHcAxB0AcQcgbHYEPCVxLyW4E7Kua4fnsCylwyPl6L92N3cAxB1A3AEQdwDEHQBxB0DcARB3AHEHQNwBEHcAxB2A3+h0OCy2ytR6T2rbtsfvKbZyFXmq4d1ute0PJvMVwc0dAHEHQNwBEHcAcQdA3AEQdwDEHQBxBxB3AMQdgL7Nx33rwTmRiODkSHA3hm6/6MSnSnS9Xjp8V+fz50HfVZ/n6eYOgLgDIO4A4g6AuAMg7gCIOwDiDiDuAIg7AOIOgLgD8P/NjuAv27Y1fsXIBln7d9X4A5Kuz7WvRMcdBQt+Nd/f327uAIg7gLgDIO4AiDsA4g6AuAMg7gDiDoC4AyDuACSxLQP8rMggTHB6JfKw4+7PuLkDIO4A4g6AuAMg7gCIOwDiDoC4A4g7AOIOgLgDIO4A/J7hsF+CS0PBbSPghf/BxP9p+w2yWu9u7gCIO4C4AyDuAIg7AOIOgLgDIO4A4g6AuAMg7gAksS3zhMjQxO1Ws15uXdfIw7ZtO+h5Lkvxo+Ifhpvc3AEQdwBxB0DcARB3AMQdAHEHQNwBxB0AcQdA3AEQdwAeCg2H1XqPPKyUkwNtL7IvFpzoiow3BefMeInItl1wossXnStYUTd3AMQdQNwBEHcAxB0AcQdA3AEQdwBxB0DcARB3APLMfb6t261mPVVwVoUptkwS/Gq2bQt8NRdn3ue3nPsfjDxV8F0Fh3FwcwcQdwDEHQBxB0DcARB3AHEHQNwBEHcAxB0AcQdA3AGG1OlwWGTtKzhsFHlY4rhY+52yxIGniMgi2BTegSJX412tdV37/FPg5g4g7gCIOwDiDoC4AyDuAOIOgLgDIO4AiDsA4g7ANH3s+97y9Uo5Nf6EjadXzGjwQo23ZYISh4YSP2Diu6r17uYOgLgDIO4AiDuAuAMg7gCIOwDiDoC4A4g7AOIOgLgD0MDsCID/Jri9lTjel7j25eYOgLgDIO4AiDsA4g4g7gCIOwDiDoC4AyDuAIg7wOg+9n3v8G2Vcmr5conbF0HLUvz4eInz+TPysMQVl8T/V+M/Tq13N3cAxB0AcQdA3AHEHQBxB0DcARB3AMQdAHEHEHcAxB2AfnQ6HBbReFxsar4vZlwMfs6hR8Hc3AHelLgDiDsA4g6AuAMg7gCIO4C4AyDuAIg7AOIOwHNmRxAXGXtJ3J8JPpUJGsDNHUDcARB3AMQdAHEHQNwBxB0AcQdA3AEQdwDEHQBxB3gHH/u+j/0JSzn5muF91Hp3CG7uAOIOgLgDIO4AiDsA4g4g7gCIOwDiDoC4AyDuAEzTPPwnjAxN2J+BYf7OuLkDiDsA4g6AuAMg7gCIO4C4AyDuAIg7AOIOgLgDIO4Ao5odwZS6RmSDDH7u/4WbO4C4AyDuAIg7AOIOgLgDIO4A4g6AuAMg7gCIOwBhtmWSBWc0TNDwPr923NwBEHcAxB1A3AEQdwDEHQBxB0DcAcTdEQCIOwDiDoC4A5DCcNhrJC4u2SDjVb893NwBEHcAxB0AcQcQdwDEHQBxB0DcARB3AHEHQNwB6JhtmcNrPBViyubo3yBu7gCIOwDiDoC4AyDuAOIOgLgDIO4AiDsA4g6AuAOIOwAHZTiM51i5Ajd3AMQdAHEHQNwBxB0AcQdA3AEQdwDEHQBxBxB3AMQdAHEHQNwBEHcAcQdA3AEQdwDEHQBxBxB3RwAg7gCIOwDiDkCKPwUYAOESekcl5hNjAAAAAElFTkSuQmCC</div><div tiddler="Main Styles" tags="stylesheet" created="201411171140" modifier="twee" twine-position="13,1087">/* Your story will use the CSS in this passage to style the page.\nGive this passage more tags, and it will only affect passages with those tags.\nExample selectors: */\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\n/*Actual Stylesheet */\n\nbody {\n\t/* This affects the entire page */\n\tbackground: #424254;\n\tmargin: 0;\n\tpadding: 0;\n\tcolor: #fff2df;\n\tfont-family: Arial;\n\t\n}\n\n.passage {\n\t/* This only affects passages */\n\tborder:none;\n\twidth: 100%;\n}\n.passage a {\n\t/* This affects passage links */\n\tcolor: #a4a4b8;\n\t\n}\n.passage a:hover {\n\t/* This affects links while the cursor is over them */\n\tcolor: #696981;\n\t\n}\n.passage p{\n\tfont-size: 0.6 em;\n\t/*font-family: 'Press Start 2P', cursive;*/\n}\n\n#sidebar{\n\tdisplay:none;\n}\n\n#passages{\n\tmargin: 0;\n\tpadding: 0;\n\twidth: 100%\n}\n\n[data-tags~=earth] {\n\tbackground-color: #2f3030; \n\tcolor: #22f000; \n\tfont-family: Terminal, Courier;\n}\n\n[data-tags~=moon] {\n\tbackground-color: #c9c9c9; \n\tcolor: #FFFFFF; \n\t/*font-family: 'Press Start 2P', cursive;*/\n}\n#bg-test \n{ background-image: [img[stars-bg]]; }\n\n.vgfont{\n\tcolor: #FFFFFF;\n\tfont-family: 'Press Start 2P', cursive;\n}\n\n#playerNovel input{\n\twidth: 500px;\n}\n\n#spreadsheet table, th, td {\n   border: 2px solid #bdbdbd;\n   background: #FFF;\n   font-family: Times New Roman;\n   color: #000;\n   text-align:right;\n}\n\n#spreadsheet th{\n\tbackground: #cecece;\n\ttext-align: center;\n\tfont-family: Verdana;\n\tfont-weight: 100;\n}</div><div tiddler="Credits" tags="" created="201411161425" modifier="twee" twine-position="16,683">Made for Antholojam 2014 \nby Tom McHenry</div><div tiddler="Store" tags="moon" created="201411301120" modifier="twee" twine-position="2361,635">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n/%&lt;&lt;set $player1.cottonNeed =1&gt;&gt;\n&lt;&lt;set $player1.cannabisNeed =1&gt;&gt;\n&lt;&lt;set $player1.coffeeNeed =1&gt;&gt;\n&lt;&lt;set $player1.beansNeed =2&gt;&gt;\n&lt;&lt;set $player1.wheatNeed =3&gt;&gt;%/\n\n&lt;&lt;if $player1.cash gte 500&gt;&gt;Buy Land from Agriculture Commission: $500 per Acre \n[[Buy Land]]&lt;&lt;else&gt;&gt;&lt;em&gt;Buy Land from Agriculture Commission: $500 per Acre&lt;/em&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $player1.cash gte 400&gt;&gt;Buy Crop Improvements: $400 \n[[Improve Crops]]&lt;&lt;else&gt;&gt;&lt;em&gt;Buy Crop Improvements: $400&lt;/em&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $player1.cash gte 5000&gt;&gt;Buy Ticket to Earth: $5,000\n[[Ticket to Earth]]&lt;&lt;else&gt;&gt;&lt;em&gt;Buy Ticket to Earth: $5,000&lt;/em&gt;&lt;&lt;endif&gt;&gt;\n\n[[Back|Planting Again]]\n/%To Work At Maximum Efficiency Next Season, You Will Also Consume Some Crops:\nBuy Cotton: &lt;&lt;print $cotton.pricePerUnit&gt;&gt;\nNeed: &lt;&lt;print $player1.cottonNeed&gt;&gt;\nBuy Coffeee: &lt;&lt;print $coffee.pricePerUnit&gt;&gt;\nNeed: &lt;&lt;print $player1.coffeeNeed&gt;&gt;\nBuy Cannabis: &lt;&lt;print $cannabis.pricePerUnit&gt;&gt;\nNeed: &lt;&lt;print $player1.cannabisNeed&gt;&gt;\nBuy Soybeans: &lt;&lt;print $beans.pricePerUnit&gt;&gt;\nNeed: &lt;&lt;print $player1.beansNeed&gt;&gt;\nBuy Wheat: &lt;&lt;print $wheat.pricePerUnit&gt;&gt;\nNeed: &lt;&lt;print $player1.wheatNeed&gt;&gt;\n&lt;&lt;set $seasonTotal = ($player1.wheatNeed * $wheat.pricePerUnit) + ($player1.beansNeed * $beans.pricePerUnit) + ($player1.cannabisNeed * $cannabis.pricePerUnit) + ($player1.coffeeNeed *$coffee.pricePerUnit) + ($player1.cottonNeed * $cotton.pricePerUnit)&gt;&gt;\n&lt;&lt;print $seasonTotal&gt;&gt;%/\n\n\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;\n</div><div tiddler="Parents Say" tags="earth" created="201412081215" modifier="twee" twine-position="433,1335">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $parentSay = (Math.floor(Math.random() * $parentSayGrid.length) + 1) - 1&gt;&gt;\n&lt;&lt;print $parentSayGrid[$parentSay][0]&gt;&gt;\n&lt;&lt;set $anxiety = $parentSayGrid[$parentSay][1] + $anxiety&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n[[Listen|Parents]]\n&lt;&lt;set $parentSayGrid.splice($parentSay,1)&gt;&gt;</div><div tiddler="Earn Money" tags="moon" created="201411291204" modifier="twee" twine-position="1670,286">&lt;&lt;set $player1.cash = $player1.cash + Math.floor(Math.random() * 20) + 1&gt;&gt;\nYou work all season on the farms of other colonists in any spare moment, doing odd jobs and unsafe work. You now have &lt;&lt;print $player1.cash&gt;&gt; and it is planting season again.\n/%Wait, but the owner should be able to sell crops, make money anyway. Maybe this links to Owner Sell? If playerCrops.acres eq zero, just bypass the sale portion?%/\n[[Planting Again]]</div><div tiddler="Starfighter Right" tags="earth" created="201411191447" modifier="twee" twine-position="644,862">&lt;&lt;nobr&gt;&gt;&lt;&lt;set $map = [[$slot1, $slot2, $slot3, $slot4, $slot5],\n\t\t[$slot6, $slot7, $slot8, $slot9, $slot10],\n\t\t[$slot11, $slot12, $slot13, $slot14, $slot15],\n\t\t[$slot16, $slot17, $slot18, $slot19, $slot20]\n\t\t]&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $space&gt;&gt;\n&lt;&lt;if $fighter.x lt 4&gt;&gt;\n&lt;&lt;set $fighter.x = $fighter.x + 1&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $fighter&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;&lt;&lt;display Control Panel&gt;&gt;</div><div tiddler="Earth Start" tags="earth" created="201411161414" modifier="twee" twine-position="312,184">This is for Earth.\n&lt;&lt;display Starfighter Init&gt;&gt;\n[[Starfighter Debug]]\n[[Variables Missing]]\n</div><div tiddler="Harvest" tags="moon" created="201411201521" modifier="twee" twine-position="1886,702">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\nCrop: &lt;&lt;print $playerCrops.crop&gt;&gt;\nStarting Acreage: &lt;&lt;print $playerCrops.acreage&gt;&gt;\nQuality: &lt;&lt;print $playerCrops.quality&gt;&gt;\nDieoff: &lt;&lt;set $dieoff = Math.floor(Math.random() * (80 - $playerCrops.quality)) + 1&gt;&gt;&lt;&lt;set $dieoff = $dieoff/100&gt;&gt;&lt;&lt;print $dieoff&gt;&gt;\n&lt;&lt;if $playerCrops.crop eq 'Cotton'&gt;&gt;&lt;&lt;set $playerCrops.acreage = Math.floor($playerCrops.acreage - ($playerCrops.acreage * $dieoff))&gt;&gt;Cotton: &lt;&lt;print $playerCrops.acreage&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Wheat'&gt;&gt;&lt;&lt;set $playerCrops.acreage = Math.floor($playerCrops.acreage - ($playerCrops.acreage * $dieoff))&gt;&gt;Wheat: &lt;&lt;print $playerCrops.acreage&gt;&gt;\n&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Cannabis'&gt;&gt;&lt;&lt;set $playerCrops.acreage = Math.floor($playerCrops.acreage - ($playerCrops.acreage * $dieoff))&gt;&gt;Cannabis: &lt;&lt;print $playerCrops.acreage&gt;&gt;\n&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Soybeans'&gt;&gt;&lt;&lt;set $playerCrops.acreage = Math.floor($playerCrops.acreage - ($playerCrops.acreage * $dieoff))&gt;&gt;Soybeans: &lt;&lt;print $playerCrops.acreage&gt;&gt;\n&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Coffee'&gt;&gt;&lt;&lt;set $playerCrops.acreage = Math.floor($playerCrops.acreage - ($playerCrops.acreage * $dieoff))&gt;&gt;Coffee: &lt;&lt;print $playerCrops.acreage&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n\n[[Owner Sell]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="YouTube Audio" tags="script" created="201412011956" modifier="twee" twine-position="13,1221">(function () {\n\t&quot;use strict&quot;;\n\tversion.extensions['youtubeAudioMacros'] = {\n\t\tmajor: 2,\n\t\tminor: 1,\n\t\trevision: 0\n\t};\n\tvar ytplayers = {},\n\t\tvideocount = 0,\n\t\tready = false,\n\t\treadyBuffer = {},\n\t\ts = document.createElement(&quot;script&quot;),\n\t\tprotocol = location.protocol == &quot;file:&quot; ? &quot;http:&quot; : location.protocol;\n\ts.src = protocol + &quot;//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject_src.js&quot;;\n\ts.onreadystatechange = s.onload = function () {\n\t\tvar re = new RegExp('(?:playbgm|loopbgm) ([^&quot;&amp;?/ ]{11})', &quot;gi&quot;),\n\t\t    div = document.getElementById(&quot;storeArea&quot;).firstChild,\n\t\t    done = [],\n\t\t    d;\n\t\tfunction newplayer(hash) {\n\t\t\tvar id = &quot;YouTube-&quot; + hash;\n\t\t\t  insertElement(document.body, &quot;div&quot;, id);\n\t\t\tswfobject.embedSWF(protocol + &quot;//www.youtube.com/apiplayer?enablejsapi=1&amp;playerapiid=&quot; + id, id, &quot;0&quot;, &quot;0&quot;, &quot;8&quot;,\n\t\t\t\tnull, {}, {\n\t\t\t\t\tallowScriptAccess: &quot;always&quot;,\n\t\t\t\t\twmode: &quot;transparent&quot;,\n\t\t\t\t\tmodestbranding: &quot;1&quot;,\n\t\t\t\t\tversion: &quot;3&quot;\n\t\t\t\t}, {\n\t\t\t\t\tid: &quot;ytplayer-&quot; + hash,\n\t\t\t\t});\n\t\t};\n\t\twhile(div) {\n\t\t\tdo {\n\t\t\t\td = re.exec(div.innerHTML);\n\t\t\t\tif(d &amp;&amp; done.indexOf(d[1]) == -1) {\n\t\t\t\t\tnewplayer(d[1]);\n\t\t\t\t\tdone.push(d[1]);\n\t\t\t\t}\n\t\t\t} while (d);\n\t\t\tdiv = div.nextSibling;\n\t\t};\n\t};\n\tdocument.head.appendChild(s);\n\twindow.onYTAudioError = function (e) {\n\t\talert(&quot;There is a problem with the YouTube background music (&quot; + e + &quot;)&quot; +\n\t\t\t(e == 2 ? &quot;: The video ID (&quot; + hash + &quot;) is probably invalid.&quot; :\n\t\t\t\te == 100 ? &quot;: The requested video (&quot; + hash + &quot;) was not found.&quot; :\n\t\t\t\te == 101 || e == 150 ? &quot;: Embedding has been disabled for the video (&quot; + hash + &quot;).&quot; : &quot;&quot;));\n\t};\n\twindow.onYouTubePlayerReady = function (e) {\n\t\tvar hash = e.slice(8),\n\t\t\tyt = (ytplayers[hash] = document.getElementById(&quot;ytplayer-&quot; + hash));\n\t\tready = true;\n\t\tyt.style.visibility=&quot;hidden&quot;;\n\t\tyt.addEventListener(&quot;onError&quot;, &quot;onYTAudioError&quot;);\n\t\tyt.mute();\n\t\tyt.loadVideoById(hash, 0);\n\t\tyt.LOAD = true;\n\t\tvideocount += 1;\n\t\twindow[&quot;onYTAudioStateChange_&quot; + videocount] = function (newState) {\n\t\t\tif(newState == 1 &amp;&amp; yt.LOAD) {\n\t\t\t\tyt.pauseVideo();\n\t\t\t\tyt.unMute();\n\t\t\t\tyt.LOAD = false;\n\t\t\t\twhile(readyBuffer[hash].length &gt; 0) {\n\t\t\t\t\treadyBuffer[hash].shift()(yt);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(newState == 0 &amp;&amp; yt.LOOP) {\n\t\t\t\tyt.playVideo();\n\t\t\t}\n\t\t};\n\t\tyt.addEventListener(&quot;onStateChange&quot;, &quot;onYTAudioStateChange_&quot; + videocount);\n\t};\n\t[&quot;playbgm&quot;,&quot;loopbgm&quot;,&quot;stopbgm&quot;,&quot;pausebgm&quot;,&quot;unloopbgm&quot;].forEach(function(e) {\n\t\tmacros[e] = {\n\t\thandler: function (e, t, n, r) {\n\t\t\tvar yt, fn;\n\t\t\tif(n[0]) {\n\t\t\t\tyt = ytplayers[n[0]];\n\t\t\t\tswitch(t) {\n\t\t\t\t  case &quot;playbgm&quot;:\n\t\t\t\t  case &quot;loopbgm&quot;:\n\t\t\t\t\tfn = function(yt) {\n\t\t\t\t\t\tyt.LOOP = (t == &quot;loopbgm&quot;);\n\t\t\t\t\t\tif (n[1]) yt.seekTo(n[1]);\n\t\t\t\t\t\tyt.playVideo();\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\t  case &quot;stopbgm&quot;:\n\t\t\t\t\tfn = function(yt) { yt.stopVideo(); };\n\t\t\t\t\tbreak;\n\t\t\t\t  case &quot;pausebgm&quot;:\n\t\t\t\t\tfn = function(yt) { yt.stopVideo(); };\n\t\t\t\t\tbreak;\n\t\t\t\t  case &quot;unloopbgm&quot;:\n\t\t\t\t\tfn = function(yt) { yt.LOOP = false; };\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (fn) {\n\t\t\t\t\tif (!yt || yt.LOAD) {\n\t\t\t\t\t\treadyBuffer[n[0]] = readyBuffer[n[0]] || [];\n\t\t\t\t\t\treadyBuffer[n[0]].push(fn);\n\t\t\t\t\t} else fn(yt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t});\n}());</div><div tiddler="Spreadsheet" tags="earth" created="201412130025" modifier="twee" twine-position="709,1371">&lt;table id=&quot;spreadsheet&quot;&gt;\n&lt;tr&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;th style=&quot;width:20px;&quot;&gt;&amp;nbsp;&lt;/th&gt;&lt;th style=&quot;width:150px;&quot;&gt;A&lt;/th&gt;&lt;th style=&quot;font-weight:bold;border-bottom:2px solid #000000;border-right:2px solid #000000; width:150px;&quot;&gt;B&lt;/th&gt;&lt;th style=&quot;width:150px;&quot;&gt;C&lt;/th&gt;&lt;th style=&quot;width:150px;&quot;&gt;D&lt;/th&gt;&lt;th style=&quot;width:150px;&quot;&gt;E&lt;/th&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;1&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;2&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece; font-weight:bold; border-bottom:2px solid #000000;&quot;&gt;3&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td style=&quot;border: 4px solid #000000;&quot;&gt;&lt;&lt;textinput $spreadsheet&gt;&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;4&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;5&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td style=&quot;background:#cecece;&quot;&gt;6&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tr&gt;&lt;/table&gt;\n&lt;&lt;button [[Add]]&gt;&gt;</div><div tiddler="Plant Marijuana" tags="moon" created="201411211155" modifier="twee" twine-position="1834,436">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;if  $player1.cash - ($playerCrops.maxAcres * $cannabis.pricePerSeed) gte 0&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Cannabis'&gt;&gt;\nYou can grow &lt;&lt;print $playerCrops.maxAcres&gt;&gt; acres of &lt;&lt;print $cannabis.name&gt;&gt;. It costs $&lt;&lt;set $cost = $playerCrops.maxAcres * $cannabis.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;.  \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $player1.cash - ($playerCrops.maxAcres * $cannabis.pricePerSeed) lt 0&gt;&gt;\nYou can't afford 10 acres of &lt;&lt;print $cannabis.name&gt;&gt;.\nYou can afford &lt;&lt;print Math.floor($player1.cash/$cannabis.pricePerSeed)&gt;&gt; acres.\n&lt;&lt;set $playerCrops.acreage = Math.floor($player1.cash/$cannabis.pricePerSeed)&gt;&gt; \n\nIt costs $&lt;&lt;set $cost = $playerCrops.acreage * $cannabis.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $player1.cash = $player1.cash - $cost&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Cannabis'&gt;&gt;\nYou are growing &lt;&lt;print $playerCrops.acreage&gt;&gt; acres of &lt;&lt;print $playerCrops.crop&gt;&gt;.\nRemaining Cash: $&lt;&lt;print $player1.cash&gt;&gt;\n[[Farm Debug]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="Variables Missing" tags="" created="201411191514" modifier="twee" twine-position="268,418">&lt;&lt;print $slot1.display&gt;&gt;\n&lt;&lt;print $map&gt;&gt;</div><div tiddler="Farm Init" tags="moon" created="201411201512" modifier="twee" twine-position="1670,106">&lt;&lt;set //initialize\n$season = 1;\n\n$colonyPop = Math.floor(Math.random() * 20) + 60; \n\n$playerCrops = {\n\tacreage: 10, \n\tcrop: 'Cotton',\n\tquality: 10,\n\tmaxAcres: 10\n} \n\n$ownerCrops = {\n\tacreage: 90,\n\tcrop: 'Tobacco',\n\tquality: 20,\n\tmaxAcres: 90,\n\ttotalCash: 0\n}\n\n$player1 = {\n\tcash: 300,\n}\n\n$cotton = {\n\tname:&quot;Cotton&quot;,\n\tpricePerUnit: 5,\n\tpricePerSeed: 5,\n\tinStore: Math.floor(Math.random() * 50) + 10,\n\tneed: 0\n};\n\n$cannabis = {\n\tname:&quot;Cannabis&quot;,\n\tpricePerUnit: 10,\n\tpricePerSeed: 5,\n\tinStore: Math.floor(Math.random() * 10) + 10,\n\tneed: 0\n};\n\n$wheat = {\t\n\tname: &quot;Wheat&quot;,\n\tpricePerUnit: 2,\n\tpricePerSeed: 5,\n\tinStore: Math.floor(Math.random() * 10) + 10,\n\tneed: 0\n};\n\n$coffee = {\t\n\tname: &quot;Coffee&quot;,\n\tpricePerUnit: 2,\n\tpricePerSeed: 5,\n\tinStore: Math.floor(Math.random() * 10) + 10,\n\tneed: 0\n};\n\n$beans = {\t\n\tname: &quot;Soybeans&quot;,\n\tpricePerUnit: 2,\n\tpricePerSeed: 5,\n\tinStore: Math.floor(Math.random() * 10) + 10,\n\tneed: 0\n};\n\n\n$allCrops = [$cotton, $cannabis, $wheat, $coffee, $beans];\n\n&gt;&gt;\n&lt;&lt;display Need Increase&gt;&gt;</div><div tiddler="Bar" tags="earth" created="201412142133" modifier="twee" twine-position="594,1566">&lt;&lt;display Bar Init&gt;&gt;\n&lt;&lt;print $cDate.name&gt;&gt;</div><div tiddler="StorySettings" tags="" created="201411241551" modifier="twee" twine-position="17,816">jquery:off\nhash:off\nbookmark:on\nmodernizr:off\nundo:off\nobfuscate:off\nexitprompt:off\nblankcss:off\n</div><div tiddler="surface2" tags="Twine.image" created="201411251323" modifier="twee" twine-position="1013,877">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFJJREFUeNrs0MEJwCAQAMEz2E+u9bzTU6wgYAN+hRNmKxi23ZlRrytKhoWFhYWFhYWFhYWFhYWFhYWFhYWFdQyrff/rFtaO+ojHLSwsrGVTgAEAOWcFOoqQ/bUAAAAASUVORK5CYII=</div><div tiddler="Debug" tags="" created="201411281818" modifier="twee" twine-position="2098,186">Economy Debug Module!\nSeason: &lt;&lt;print $season&gt;&gt;\nColony Population: &lt;&lt;print $colonyPop&gt;&gt;\n\nPlayer\n--------\nCash: &lt;&lt;print $player1.cash&gt;&gt;\nAcreage: &lt;&lt;print $playerCrops.acreage&gt;&gt;\nCrop: &lt;&lt;print $playerCrops.crop&gt;&gt;\n\nCotton\n--------\nPrice (unit): &lt;&lt;print $cotton.pricePerUnit&gt;&gt;\nPrice (seed): &lt;&lt;print $cotton.pricePerSeed&gt;&gt;\nIn Store: &lt;&lt;print $cotton.inStore&gt;&gt;\nNeed: &lt;&lt;print $cotton.need&gt;&gt;\n\nCannabis\n--------\nPrice (unit): &lt;&lt;print $cannabis.pricePerUnit&gt;&gt;\nPrice (seed): &lt;&lt;print $cannabis.pricePerSeed&gt;&gt;\nIn Store: &lt;&lt;print $cannabis.inStore&gt;&gt;\nNeed: &lt;&lt;print $cannabis.need&gt;&gt;\n\nWheat\n--------\nPrice (unit): &lt;&lt;print $wheat.pricePerUnit&gt;&gt;\nPrice (seed): &lt;&lt;print $wheat.pricePerSeed&gt;&gt;\nIn Store: &lt;&lt;print $wheat.inStore&gt;&gt;\nNeed: &lt;&lt;print $wheat.need&gt;&gt;\n\nCoffee\n--------\nPrice (unit): &lt;&lt;print $coffee.pricePerUnit&gt;&gt;\nPrice (seed): &lt;&lt;print $coffee.pricePerSeed&gt;&gt;\nIn Store: &lt;&lt;print $coffee.inStore&gt;&gt;\nNeed: &lt;&lt;print $coffee.need&gt;&gt;\n\nSoybeans\n--------\nPrice (unit): &lt;&lt;print $beans.pricePerUnit&gt;&gt;\nPrice (seed): &lt;&lt;print $beans.pricePerSeed&gt;&gt;\nIn Store: &lt;&lt;print $beans.inStore&gt;&gt;\nNeed: &lt;&lt;print $beans.need&gt;&gt;</div><div tiddler="Need Increase" tags="moon" created="201411281624" modifier="twee" twine-position="2301,456">&lt;&lt;nobr&gt;&gt;&lt;&lt;set $cotton.need = Math.floor($colonyPop *2.4)&gt;&gt;&lt;&lt;set $cannabis.need = Math.floor($colonyPop * 2)&gt;&gt;&lt;&lt;set $coffee.need = Math.floor($colonyPop * 2.2)&gt;&gt;&lt;&lt;set $beans.need = Math.floor($colonyPop * 2.5)&gt;&gt;&lt;&lt;set $wheat.need = Math.floor($colonyPop * 2.8)&gt;&gt;&lt;&lt;endnobr&gt;&gt;</div><div tiddler="Fonts" tags="script" created="201411171143" modifier="twee" twine-position="15,421"> WebFontConfig = {\n    google: { families: [ 'Press+Start+2P::latin' ] }\n  };\n  (function() {\n    var wf = document.createElement('script');\n    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +\n      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';\n    wf.type = 'text/javascript';\n    wf.async = 'true';\n    var s = document.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(wf, s);\n  })(); </div><div tiddler="blank" tags="Twine.image" created="201411241606" modifier="twee" twine-position="1009,601">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEVJREFUeNrsz0ERAAAIAyDXP/TM4NeDBqTtfBARERERERERERERERERERERERERERERERERERERERERERERERERkYsVYAASxZWd18D18QAAAABJRU5ErkJggg==</div><div tiddler="Seed Pricing" tags="moon" created="201411231507" modifier="twee" twine-position="1945,102">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $cotton.pricePerSeed = Math.floor($cotton.pricePerUnit/3)&gt;&gt;\n&lt;&lt;set $cannabis.pricePerSeed = Math.floor($cannabis.pricePerUnit/3)&gt;&gt;\n&lt;&lt;set $wheat.pricePerSeed = Math.floor($wheat.pricePerUnit/3)&gt;&gt;\n&lt;&lt;set $beans.pricePerSeed = Math.floor($beans.pricePerUnit/3)&gt;&gt;\n&lt;&lt;set $coffee.pricePerSeed = Math.floor($coffee.pricePerUnit/3)&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;</div><div tiddler="New Game" tags="" created="201411161314" modifier="twee" twine-position="261,11">&lt;div style=&quot;text-align: center;&quot;&gt;Where are you from?&lt;/div&gt;\n&lt;div style=&quot;float: left; width: 50%; background-color: green;text-align:right;&quot;&gt;\n[[Earth|Earth Start]]\n&lt;/div&gt;&lt;div style=&quot;float: left; width: 50%; background-color: blue;&quot;&gt;\n[[Moon|Moon Start]]\n&lt;/div&gt;</div><div tiddler="Bar Init" tags="earth" created="201412142134" modifier="twee" twine-position="726,1526">&lt;&lt;set //initialize\n$cDate = {\n\tname: 'C------'\n} \n&gt;&gt;\n\n</div><div tiddler="Farm Debug" tags="moon" created="201411201511" modifier="twee" twine-position="1884,565">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\nPlayer Crop: &lt;&lt;print $playerCrops.crop&gt;&gt;\nQuality: &lt;&lt;print $playerCrops.quality&gt;&gt;\nOwner Crop: &lt;&lt;print $ownerCrops.crop&gt;&gt;\n\n[[Harvest]]\n[[Samizdat]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="stars-bg" tags="Twine.image" created="201411241359" modifier="twee" twine-position="1011,739">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAEsCAIAAABi1XKVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABPpJREFUeNrs3TFuE0EUx2EH+T5EckvjK3AXn8J3QaKmcJPWV4ETINGgFZFS2Ozszn/mfV+VFsf89Gb0dnP8/Pp6GNm3+5fl56+ntwMwr08+AkCwABp7Gf1ICJiwAAQLQLCA6R19BPmsboAJCxAsAMECirOHBUXd7tfl5/PpYsICECxAsACSucNiE3bHMGEBggUgWAANucNiKsm7Re711vPws+8rOBICCBbgSAgzSH4mrvI9QKv7EMHyfQVHQgDBAsqyhwWYsAAECxAsgHQRaw2eWcnk94IJC0CwAMECCGEPCxiGZwnHNuLfwgRHQkCwABwJoRf7ZYJFH+6tcCQEECyAFexhweRmurMzYQGCBSBYQFnusAATFoBgAYIFkO6hR3M8ewWYsAAECxAsgI7sYbEr96Gs4X1Y/t+CIyGAYAGOhLAH51/WcOkOOBICCBZQljusovyNe0xYAIIFIFjAQKw1ACYsAMECBAsgXfQelnew4Dvg9/7v792EBTgSAggWUJY9LBhY8h3fFs+revjZdxccCQEECyjLkRAa6PV+seSz/xafg2A9J/meyL0VjoQAggXgSAj78178fVgcBRwJAQQLECwAwQIQLECwAELZwwrlXTFgwgIEC0CwABabPJrj/gUwYQGCBSBYAA15vQxgwgIQLECwANJ5lhA6m2lvcet/iwkLcCQEECygLHtY8AHPw5qwAAQLECyAKO6wiHO7X5efz6eLDwQTFiBYAIIFMPwdln0ZMGEBCBaAYAHTs4fVmB0iMGEBCBYgWADNucMCTFgAggUIFkA6f5cQJlHhuVoTFiBYAIIFlGUPCzBhAQgWIFgA6exhAd08uztmwgIcCQEECyjLHhZgwgIQLECwAAQLoJGHFkcrvBgMMGEBCBYgWACxLI4CJiwAwQIECyDdtC/wszsGJiwAwQIQLGAa9rAAExaAYAGCBZDOH1KFxm736/Lz+XTxgZiwAMECECyA9exhweRmeq7WhAUIFoBgAWW5w+IdO0SYsAAECxAsgEDusIJ4Dz2YsADBAhAsgA9tcoc1012MeyUwYQEIFiBYAN3ZwwJMWACCBQgWQDp/lxBoZuu9RRMW4EgIIFhAWfaw4C/PjZqwAAQLECyAWO6wABMWgGABggUgWACCBQgWQCivl4G9eQZIsBLd7tfl5/Pp4gMBR0JAsAAcCWEHyfdE7q36Byv5vqbXd9e9FTgSAoIFUORICFHcE03p3fuw7LPV5PfOKN8BR0JgGIIFCBZAa97pDpiwAAQLECyAdBZHGYb3i2HCAgQLQLCAsuxhASYsAMECyrLWAI/yHh7Bwv9bcCQEBAvAkRDSOf92Zw8L6ObZ+1BHQmAYggUIFkBr7rAAExaAYAGCBZBu+MVRz7WBCQtAsAAEC5iePazBuLPDhAUgWADteB8W8/M37gWLPtxb4UgIIFgA7VhrAIbhDosI9sv8XhwJgakIFiBYAK25dAdMWACCBQgWQLpVe1h2ZwATFoBgAWWPhFCW+5DxglX595T8ffW+OhwJAQQLYIcjIZTl3qoLzxLSjHtoHAkBBAsQLICNDHOHZbcIMGEBggUgWEBZ9rAoze6YCQtAsADBAhiCOyzAhAUgWIBgAQgWgGABggUgWACCBQgWgGABCBYwt5efv3/4FAATFoBgAYIFkOz46/DdpwCYsAAECxAsAMECECxAsAAEC+D//RFgAN4GAR4fmrDwAAAAAElFTkSuQmCC</div><div tiddler="Starfighter Left" tags="earth" created="201411191447" modifier="twee" twine-position="318,859">&lt;&lt;nobr&gt;&gt;&lt;&lt;set $map = [[$slot1, $slot2, $slot3, $slot4, $slot5],\n\t\t[$slot6, $slot7, $slot8, $slot9, $slot10],\n\t\t[$slot11, $slot12, $slot13, $slot14, $slot15],\n\t\t[$slot16, $slot17, $slot18, $slot19, $slot20]\n\t\t]&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $space&gt;&gt;\n&lt;&lt;if $fighter.x gt 0&gt;&gt;\n&lt;&lt;set $fighter.x = $fighter.x - 1&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $fighter&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;&lt;&lt;display Control Panel&gt;&gt;</div><div tiddler="StoryTitle" tags="" created="201411161312" modifier="twee" twine-position="10,150">Tonight Dies The Moon!</div><div tiddler="Plant Cotton" tags="moon" created="201411211155" modifier="twee" twine-position="1572,429">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;if  $player1.cash - ($playerCrops.maxAcres * $cotton.pricePerSeed) gte 0&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Cotton'&gt;&gt;\nYou can grow &lt;&lt;print $playerCrops.maxAcres&gt;&gt; acres of &lt;&lt;print $cotton.name&gt;&gt;. It costs $&lt;&lt;set $cost = $playerCrops.maxAcres * $cotton.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $player1.cash - ($playerCrops.maxAcres * $cotton.pricePerSeed) lt 0&gt;&gt;\nYou can't afford &lt;&lt;print $playerCrops.maxAcres&gt;&gt; acres of &lt;&lt;print $cotton.name&gt;&gt;.\nYou can afford &lt;&lt;print Math.floor($player1.cash/$cotton.pricePerSeed)&gt;&gt; acres.\n&lt;&lt;set $playerCrops.acreage = Math.floor($player1.cash/$cotton.pricePerSeed)&gt;&gt; \n\nIt costs $&lt;&lt;set $cost = $playerCrops.acreage * $cotton.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $player1.cash = $player1.cash - $cost&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Cotton'&gt;&gt;\nYou are growing &lt;&lt;print $playerCrops.acreage&gt;&gt; acres of &lt;&lt;print $playerCrops.crop&gt;&gt;.\nRemaining Cash: $&lt;&lt;print $player1.cash&gt;&gt;\n[[Farm Debug]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="Soundtrack Test" tags="" created="201412011953" modifier="twee" twine-position="2586,161">&lt;&lt;playbgm 740TB17Dsn0 20&gt;&gt;\n\nTest</div><div tiddler="Buy Land" tags="moon" created="201411301236" modifier="twee" twine-position="2593,876">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\nYou purchase some more of your farm from the Agricultural Commission. \nOld Acreage: &lt;&lt;print $playerCrops.maxAcres&gt;&gt; acres.\n&lt;&lt;set $playerCrops.maxAcres = $playerCrops.maxAcres + 1&gt;&gt;&lt;&lt;set $playerCrops.acreage = $playerCrops.acreage + 1&gt;&gt;&lt;&lt;set $ownerCrops.maxAcres = $ownerCrops.maxAcres - 1&gt;&gt;&lt;&lt;set $ownerCrops.acreage = $ownerCrops.acreage - 1&gt;&gt;\nNew Acreage: &lt;&lt;print $playerCrops.maxAcres&gt;&gt; acres.\n&lt;&lt;set $player1.cash = $player1.cash - 500&gt;&gt;\nNew Cash on Hand: &lt;&lt;print $player1.cash&gt;&gt;\n[[Return to Store Menu|Store]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;\n</div><div tiddler="Planting Start" tags="moon" created="201411210957" modifier="twee" twine-position="1906,266">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;nobr&gt;&gt;&lt;&lt;display Farm Init&gt;&gt;\n&lt;&lt;display Price Update&gt;&gt;\n&lt;&lt;display Seed Pricing&gt;&gt;\nSeason: &lt;&lt;print $season&gt;&gt;&lt;&lt;endnobr&gt;&gt;\nColony Population Rating: &lt;&lt;print $colonyPop&gt;&gt;\n\n&lt;&lt;display Penalties&gt;&gt;\n\nCurrent Trading Prices\nCotton: $&lt;&lt;print $cotton.pricePerUnit&gt;&gt;\nCannabis: $&lt;&lt;print $cannabis.pricePerUnit&gt;&gt;\nWheat: $&lt;&lt;print $wheat.pricePerUnit&gt;&gt;\nSoybeans: $&lt;&lt;print $beans.pricePerUnit&gt;&gt;\nCoffee: $&lt;&lt;print $coffee.pricePerUnit&gt;&gt;&lt;&lt;set $cropRatio = [$cotton, $cannabis, $wheat, $coffee, $beans]&gt;&gt;&lt;&lt;set $cropRatio = $cropRatio.sort(function(a, b){return a.ratio-b.ratio})&gt;&gt;\n\n\nThe Agricultural Commission has instructed you to grow &lt;&lt;$ownerCrops.acreage&gt;&gt; of &lt;&lt;print $cropRatio[0].name&gt;&gt; this season due to shortages.\n\nWhat will you plant for the &lt;&lt;$playerCrops.acreage&gt;&gt; acres you control?\nYou have $&lt;&lt;print $player1.cash&gt;&gt;.\n&lt;&lt;if $player1.cash gt $cropRatio[4].pricePerSeed&gt;&gt;\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $cotton.pricePerSeed gt 0&gt;&gt;[[Cotton|Plant Cotton]]: $&lt;&lt;print $cotton.pricePerSeed &gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $cannabis.pricePerSeed gt 0&gt;&gt;[[Cannabis|Plant Marijuana]]: $&lt;&lt;print $cannabis.pricePerSeed&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $wheat.pricePerSeed gt 0&gt;&gt;[[Wheat|Plant Wheat]]: $&lt;&lt;print $wheat.pricePerSeed&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $beans.pricePerSeed gt 0&gt;&gt;[[Soybeans|Plant Soybeans]]: $&lt;&lt;print $beans.pricePerSeed&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $coffee.pricePerSeed gt 0&gt;&gt;[[Coffee|Plant Coffee]]: $&lt;&lt;print $coffee.pricePerSeed&gt;&gt;&lt;br&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n&lt;&lt;else&gt;&gt;\nYou can't afford any seed this season. \n[[Earn Money]]\n&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;set $ownerCrops.crop = $cropRatio[0].name&gt;&gt;\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="surface3" tags="Twine.image" created="201411251323" modifier="twee" twine-position="1160,862">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFBJREFUeNrs0MENgDAMALGkYh+yet/sBBMgsQSt8vBNYF2eVdGvES3DwsLCwsLCwsLCwsLCwsLCwsLC+r2838strBUdT0y3sLCwsLC29gkwAFGBBTo7tI4uAAAAAElFTkSuQmCC</div><div tiddler="Moon Start" tags="moon" created="201411161414" modifier="twee" twine-position="983,215">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold;&quot;&gt;\n&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $cropsDisplay = $allCrops.length -1 &gt;&gt;\nEconomy Debug Mode!!!\n/%&lt;&lt;display Display Crops&gt;&gt;%/\n&lt;&lt;endnobr&gt;&gt;\n% = &lt;&lt;print $cotton.inStore / $cotton.need&gt;&gt;\nCurve Model\n--------------\ny = &lt;&lt;print Math.pow(($cotton.inStore / $cotton.need - 1),2)&gt;&gt;\nMaxPrice = &lt;&lt;set $curvePrice = Math.floor(100 * Math.pow(($cotton.inStore / $cotton.need - 1),2))&gt;&gt;&lt;&lt;print $curvePrice&gt;&gt;\n\nLinear Model\n--------------\ny = &lt;&lt;print (0-$cotton.inStore/$cotton.need)+1&gt;&gt;\nMaxPrice = &lt;&lt;set $linearPrice = 100 + Math.floor(100*(0-$cotton.inStore/$cotton.need)+1)&gt;&gt;&lt;&lt;print $linearPrice&gt;&gt;\n\nYou Have\n--------------\nOn Hand = &lt;&lt;print $cotton.onHand&gt;&gt;\n$ = &lt;&lt;print $player1.cash&gt;&gt;\n[[Sell]]\n[[Buy|Store]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;&quot;&gt;\n[img[moon]]\n&lt;/div&gt;</div><div tiddler="surface1" tags="Twine.image" created="201411251323" modifier="twee" twine-position="872,735">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAGdJREFUeNrs0kENgEAMBMAWByjhEhSgACN8EcYbLVgABZdggOeR3GNWQDvpNqdSor8M0WWwsLCwsLCwsLCwsLCwsLCwsLCwmifvev66YJl3JfqteOJoMnSMVYlYedXNtbCwsD7zCjAAs+ILa7YmKlMAAAAASUVORK5CYII=</div><div tiddler="Samizdat" tags="moon" created="201412122057" modifier="twee" twine-position="2519,1076">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;if $sentence eq 0&gt;&gt;&lt;&lt;display Samizdat Init&gt;&gt;&lt;&lt;endif&gt;&gt;\s\n&lt;&lt;print $novel[$sentence]&gt;&gt;\n&lt;&lt;textblock $playerNovel&gt;&gt;\n[[Samizdat Done]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="fighter" tags="Twine.image" created="201411191358" modifier="twee" twine-position="1163,736">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAANxJREFUeNrs28ERgjAUhOEkYwO2YB16824lVmMl3j1aBy3QAeiVOCODgBH89hog88++5SVhiG3bhjGqm1vnAdt0jCWv71MKfybAa9dm7gmq5tzNYDi9Hd+lS+QwYMDlMpz3zW/fz2HAMjxM+dp26gyOXTsracCAAQO2Pfxc97kniGPPtIbuh/uAn/vhg5IGDPh3Xlr5GVYdrhwGDHhBGS6dWSUNWIb1YSUNWB/mMGDA+vA6Hd4racD6MIcBy3DBPpyPcxgw4EGa/fvwS1+e+B8GDgMGDBgw4AXrIcAAbJNAE+vLDgEAAAAASUVORK5CYII=</div><div tiddler="Plant Wheat" tags="moon" created="201411211155" modifier="twee" twine-position="1965,438">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;if  $player1.cash - ($playerCrops.maxAcres * $wheat.pricePerSeed) gte 0&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Wheat'&gt;&gt;\nYou can grow &lt;&lt;print $playerCrops.maxAcres&gt;&gt; acres of &lt;&lt;print $wheat.name&gt;&gt;. It costs $&lt;&lt;set $cost = $playerCrops.maxAcres * $wheat.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $player1.cash - ($playerCrops.maxAcres * $wheat.pricePerSeed) lt 0&gt;&gt;\nYou can't afford 10 acres of &lt;&lt;print $wheat.name&gt;&gt;.\nYou can afford &lt;&lt;print Math.floor($player1.cash/$wheat.pricePerSeed)&gt;&gt; acres.\n&lt;&lt;set $playerCrops.acreage = Math.floor($player1.cash/$wheat.pricePerSeed)&gt;&gt; \n\nIt costs $&lt;&lt;set $cost = $playerCrops.acreage * $wheat.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $player1.cash = $player1.cash - $cost&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Wheat'&gt;&gt;\nYou are growing &lt;&lt;print $playerCrops.acreage&gt;&gt; acres of &lt;&lt;print $playerCrops.crop&gt;&gt;.\nRemaining Cash: $&lt;&lt;print $player1.cash&gt;&gt;\n[[Farm Debug]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="Office" tags="earth" created="201412091127" modifier="twee" twine-position="903,1178">&lt;&lt;if $passes eq 0&gt;&gt;\n&lt;&lt;display Office Init&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;display Office Happen&gt;&gt;\n&lt;&lt;set $passes = $passes + 1&gt;&gt;</div><div tiddler="Parent Fail" tags="" created="201412081530" modifier="twee" twine-position="152,1499"></div><div tiddler="Samizdat TextBlock" tags="script" created="201412122339" modifier="twee" twine-position="14,1519">try {\n  version.extensions['textblock'] = { \n    major:1, minor:0, revision:0 \n  };\n\tmacros['textblock'] = {\n\t\thandler: function(place, macroName, params, parser) {\n\t\t\t\tv = params[0].replace(&quot;$&quot;,&quot;&quot;);\n\t\t\t\tvar input= document.createElement('textarea');\n\t\t\t\tinput.setAttribute('maxlength', 5000);\n\t\t\t\tinput.setAttribute('cols',60);\n\t\t\t\tinput.setAttribute('rows', 15);\n\t\t\t\td = v+&quot;TextInput&quot;;\n\t\t\t\tinput.id = d;\n\t\t\t\tinput.addEventListener('keyup', function()\n\t\t\t\t{\n\t\t\t\t\tstate.history[0].variables[v] = document.getElementById(d).value;\n\t\t\t\t});\n\t\t\t\tplace.appendChild(input);\n\t\t},\t\n\t\tinit: function() { var v; var d;},\n\t};\n} catch(e) {\n  throwError(place,&quot;textblock Setup Error: &quot;+e.message); \n}\n\n(function(){var r=&quot;&quot;;var s=Wikifier.formatters;for(var j=0;j&lt;s.length;j++){if(s[j].name==&quot;image&quot;){r=s[j].lookahead;\nbreak;}}var div=$(&quot;storeArea&quot;).firstChild.nextSibling;while(div){if(r){k(new RegExp(r,&quot;mg&quot;),4);\n}var b=String.fromCharCode(92);var u=b+&quot;s*['&quot;+'&quot;]?([^&quot;'+&quot;']+(jpe?g|a?png|gif|bmp))['&quot;+'&quot;]?'+b+&quot;s*&quot;;\nk(new RegExp(&quot;url&quot;+b+&quot;(&quot;+u+b+&quot;)&quot;,&quot;mig&quot;),1);k(new RegExp(&quot;src&quot;+b+&quot;s*=&quot;+u,&quot;mig&quot;),1);\ndiv=div.nextSibling;}function k(c,e){do{d=c.exec(div.innerHTML);if(d){var i=new Image();\ni.src=d[e];}}while(d);}}());</div><div tiddler="Penalties" tags="moon" created="201412131801" modifier="twee" twine-position="1596,704">&lt;&lt;nobr&gt;&gt;\n/%&lt;&lt;display Farm Init&gt;&gt;\n&lt;&lt;set $cotton.inStore = 0&gt;&gt;\s\n&lt;&lt;set $wheat.inStore = 0&gt;&gt;\s\n&lt;&lt;set $cannabis.inStore = 0&gt;&gt;\s\n&lt;&lt;set $beans.inStore = 0&gt;&gt;\s\n&lt;&lt;set $coffee.inStore = 0&gt;&gt;\s\nCotton Price: &lt;&lt;print $cotton.inStore&gt;&gt;\nWheat Price: &lt;&lt;print $wheat.inStore&gt;&gt;\nCannabis Price: &lt;&lt;print $cannabis.inStore&gt;&gt;\nSoybeans Price: &lt;&lt;print $beans.inStore&gt;&gt;\nCoffee Price: &lt;&lt;print $coffee.inStore&gt;&gt;%/\n&lt;&lt;if $cotton.inStore lte 0 &gt;&gt;\n/%&lt;strong&gt;Cotton Penalty&lt;/strong&gt;\nPlayer Owner Quality Decrease\n\tOld Player Crop Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;%/\n\t&lt;&lt;set $playerCrops.quality = $playerCrops.quality - 2&gt;&gt;\n\t/%New Player Crop Quality:&lt;&lt;print $playerCrops.quality&gt;&gt;\nOwner Quality Decrease\n\tOld Owner Crop Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;%/\n\t&lt;&lt;set $ownerCrops.quality = $ownerCrops.quality - 2&gt;&gt;\n\t/%New Owner Crop Quality:&lt;&lt;print $ownerCrops.quality&gt;&gt;%/\nThe cotton supply of your pod has been completely exhausted. This is setback will decrease the quality of crops you'll be able to produce this season.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $wheat.inStore lte 0 &gt;&gt;\n/%&lt;strong&gt;Wheat Penalty&lt;/strong&gt;\nPopulation Decrease\n\tOld Colony Pop: &lt;&lt;print $colonyPop&gt;&gt;%/\n\t&lt;&lt;set $colonyPop = $colonyPop - 5&gt;&gt;\n\t/%New Colony Pop: &lt;&lt;print $colonyPop&gt;&gt;\nIncreased Soybeans InStore Loss\n\tOld Soybeans inStore: &lt;&lt;print $beans.inStore&gt;&gt;%/\n\t&lt;&lt;set $beans.inStore = $beans.inStore - 10&gt;&gt;\n\t/%New Soybeans inStore: &lt;&lt;print $beans.inStore&gt;&gt;\nIncreased Wheat Need in Future\n\tOld Wheat Need: &lt;&lt;print $wheat.need&gt;&gt;%/\n\t&lt;&lt;set $wheat.need = $wheat.need + 10&gt;&gt;\n\t/%New Wheat Need:&lt;&lt;print $wheat.need&gt;&gt;%/\nThe wheat supply of your pod has been completely exhausted. The colony population decreases due to malnourishment and starvation. The demand for soybeans jumps. The Agricultural Commission readjusts the projected need for future wheat harvests to support this population increases. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $cannabis.inStore lte 0 &gt;&gt;\n/%&lt;strong&gt;Cannabis Penalty&lt;/strong&gt;\nPlayer Owner Quality Decrease\n\tOld Player Crop Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;%/\n\t&lt;&lt;set $playerCrops.quality = $playerCrops.quality - 2&gt;&gt;\n/%\tNew Player Crop Quality:&lt;&lt;print $playerCrops.quality&gt;&gt;\nOwner Quality Decrease\n\tOld Owner Crop Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;%/\n\t&lt;&lt;set $ownerCrops.quality = $ownerCrops.quality - 2&gt;&gt;\n/%\tNew Owner Crop Quality:&lt;&lt;print $ownerCrops.quality&gt;&gt;%/\nThe cannabis supply of your pod has been completely exhausted. This is setback will decrease the quality of crops you'll be able to produce this season.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $beans.inStore lte 0 &gt;&gt;\n/%&lt;strong&gt;Soybeans Penalty&lt;/strong&gt;\nPopulation Decrease\n\tOld Colony Pop: &lt;&lt;print $colonyPop&gt;&gt;%/\n\t&lt;&lt;set $colonyPop = $colonyPop - 5&gt;&gt;\n/%\tNew Colony Pop: &lt;&lt;print $colonyPop&gt;&gt;\nIncreased Wheat InStore Loss\n\tOld Wheat inStore: &lt;&lt;print $wheat.inStore&gt;&gt;%/\n\t&lt;&lt;set $wheat.inStore = $wheat.inStore - 10&gt;&gt;\n/%\tNew Wheat inStore: &lt;&lt;print $wheat.inStore&gt;&gt;\nIncreased Soybeans Need in Future\n\tOld Soybeans Need: &lt;&lt;print $beans.need&gt;&gt;%/\n\t&lt;&lt;set $beans.need = $beans.need + 10&gt;&gt;\n/%\tNew Soybeans Need:&lt;&lt;print $beans.need&gt;&gt; %/\nThe soybean supply of your pod has been completely exhausted. The colony population decreases due to malnourishment and starvation. The demand for wheat jumps. The Agricultural Commission readjusts the projected need for future soybeans harvests to support this population increases. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $coffee.inStore lte 0 &gt;&gt;\n/%&lt;strong&gt;Coffee Penalty&lt;/strong&gt;\nPlayer Owner Quality Decrease\n\tOld Player Crop Quality: &lt;&lt;print $playerCrops.quality&gt;&gt;%/\n\t&lt;&lt;set $playerCrops.quality = $playerCrops.quality - 2&gt;&gt;\n/%\tNew Player Crop Quality:&lt;&lt;print $playerCrops.quality&gt;&gt;\nOwner Quality Decrease\n\tOld Owner Crop Quality: &lt;&lt;print $ownerCrops.quality&gt;&gt;%/\n\t&lt;&lt;set $ownerCrops.quality = $ownerCrops.quality - 2&gt;&gt;\n/%\tNew Owner Crop Quality:&lt;&lt;print $ownerCrops.quality&gt;&gt;%/\nThe coffee supply of your pod has been completely exhausted. This is setback will decrease the quality of crops you'll be able to produce this season.\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;</div><div tiddler="Plant Soybeans" tags="moon" created="201411261526" modifier="twee" twine-position="1705,432">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;if  $player1.cash - ($playerCrops.maxAcres * $beans.pricePerSeed) gte 0&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Soybeans'&gt;&gt;\nYou can grow &lt;&lt;print $playerCrops.maxAcres&gt;&gt; acres of &lt;&lt;print $beans.name&gt;&gt;. It costs $&lt;&lt;set $cost = $playerCrops.maxAcres * $beans.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $player1.cash - ($playerCrops.maxAcres * $beans.pricePerSeed) lt 0&gt;&gt;\nYou can't afford 10 acres of &lt;&lt;print $beans.name&gt;&gt;.\nYou can afford &lt;&lt;print Math.floor($player1.cash/$beans.pricePerSeed)&gt;&gt; acres.\n&lt;&lt;set $playerCrops.acreage = Math.floor($player1.cash/$beans.pricePerSeed)&gt;&gt; \n\nIt costs $&lt;&lt;set $cost = $playerCrops.acreage * $beans.pricePerSeed&gt;&gt;&lt;&lt;print $cost&gt;&gt;. \n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $player1.cash = $player1.cash - $cost&gt;&gt;\n&lt;&lt;set $playerCrops.crop = 'Soybeans'&gt;&gt;\nYou are growing &lt;&lt;print $playerCrops.acreage&gt;&gt; acres of &lt;&lt;print $playerCrops.crop&gt;&gt;.\nRemaining Cash: $&lt;&lt;print $player1.cash&gt;&gt;\n[[Farm Debug]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="Ticket to Earth" tags="" created="201411301236" modifier="twee" twine-position="2870,734">Begin Endgame</div><div tiddler="Owner Sell" tags="moon" created="201411211724" modifier="twee" twine-position="1889,831">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;\n&lt;&lt;display Price Update&gt;&gt;\nCrop: &lt;&lt;print $ownerCrops.crop&gt;&gt;\nStarting Acreage: &lt;&lt;print $ownerCrops.acreage&gt;&gt;\nQuality: &lt;&lt;print $ownerCrops.quality&gt;&gt;\nDieoff: &lt;&lt;set $dieoff = Math.floor(Math.random() * (80 - $ownerCrops.quality)) + 1&gt;&gt;&lt;&lt;set $dieoff = $dieoff/100&gt;&gt;&lt;&lt;print $dieoff&gt;&gt;\n&lt;&lt;if $ownerCrops.crop eq 'Cotton'&gt;&gt;&lt;&lt;set $ownerCrops.acreage = Math.floor($ownerCrops.acreage - ($ownerCrops.acreage * $dieoff))&gt;&gt;Cotton: &lt;&lt;print $ownerCrops.acreage&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $ownerCrops.crop eq 'Wheat'&gt;&gt;&lt;&lt;set $ownerCrops.acreage = Math.floor($ownerCrops.acreage - ($ownerCrops.acreage * $dieoff))&gt;&gt;Wheat: &lt;&lt;print $ownerCrops.acreage&gt;&gt;\n&lt;&lt;endif&gt;&gt;&lt;&lt;if $ownerCrops.crop eq 'Cannabis'&gt;&gt;&lt;&lt;set $ownerCrops.acreage = Math.floor($ownerCrops.acreage - ($ownerCrops.acreage * $dieoff))&gt;&gt;Cannabis: &lt;&lt;print $ownerCrops.acreage&gt;&gt;\n&lt;&lt;endif&gt;&gt;&lt;&lt;if $ownerCrops.crop eq 'Coffee'&gt;&gt;&lt;&lt;set $ownerCrops.acreage = Math.floor($ownerCrops.acreage - ($ownerCrops.acreage * $dieoff))&gt;&gt;Coffee: &lt;&lt;print $ownerCrops.acreage&gt;&gt;\n&lt;&lt;endif&gt;&gt;&lt;&lt;if $ownerCrops.crop eq 'Soybeans'&gt;&gt;&lt;&lt;set $ownerCrops.acreage = Math.floor($ownerCrops.acreage - ($ownerCrops.acreage * $dieoff))&gt;&gt;Soybeans: &lt;&lt;print $ownerCrops.acreage&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n\n&lt;&lt;if $ownerCrops.crop eq 'Cotton'&gt;&gt;Cotton Price = &lt;&lt;print $cotton.pricePerUnit &gt;&gt;&lt;br&gt;&lt;&lt;set $profit = $cotton.pricePerUnit  * $ownerCrops.acreage&gt;&gt;&lt;&lt;set $cotton.inStore = $cotton.inStore + $ownerCrops.acreage&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $ownerCrops.crop eq 'Wheat'&gt;&gt;Wheat Price = &lt;&lt;print $wheat.pricePerUnit &gt;&gt;&lt;&lt;set $profit = $wheat.pricePerUnit  * $ownerCrops.acreage&gt;&gt;&lt;&lt;set $wheat.inStore = $wheat.inStore + $ownerCrops.acreage&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $ownerCrops.crop eq 'Cannabis'&gt;&gt;Cannabis Price = &lt;&lt;print $cannabis.pricePerUnit &gt;&gt;&lt;&lt;set $profit = $cannabis.pricePerUnit  * $ownerCrops.acreage&gt;&gt;&lt;&lt;set $cannabis.inStore = $cannabis.inStore + $ownerCrops.acreage&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $ownerCrops.crop eq 'Coffee'&gt;&gt;Coffee Price = &lt;&lt;print $coffee.pricePerUnit &gt;&gt;&lt;&lt;set $profit = $coffee.pricePerUnit  * $ownerCrops.acreage&gt;&gt;&lt;&lt;set $coffee.inStore = $coffee.inStore + $ownerCrops.acreage&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $ownerCrops.crop eq 'Soybeans'&gt;&gt;Soybeans Price = &lt;&lt;print $beans.pricePerUnit &gt;&gt;&lt;&lt;set $profit = $beans.pricePerUnit  * $ownerCrops.acreage&gt;&gt;&lt;&lt;set $beans.inStore = $beans.inStore + $ownerCrops.acreage&gt;&gt;&lt;&lt;endif&gt;&gt;\nThe Agricultural Commission makes &lt;&lt;print $profit&gt;&gt; this season from your work. /%Some code to display price differential here.%/&lt;&lt;set $ownerCrops.totalCash = $ownerCrops.totalCash + $profit&gt;&gt;\nTotal: &lt;&lt;print $ownerCrops.totalCash&gt;&gt;\n[[Sell]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;\n</div><div tiddler="Starfighter Down" tags="earth" created="201411191447" modifier="twee" twine-position="492,1021">&lt;&lt;nobr&gt;&gt;&lt;&lt;set $map = [[$slot1, $slot2, $slot3, $slot4, $slot5],\n\t\t[$slot6, $slot7, $slot8, $slot9, $slot10],\n\t\t[$slot11, $slot12, $slot13, $slot14, $slot15],\n\t\t[$slot16, $slot17, $slot18, $slot19, $slot20]\n\t\t]&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $space&gt;&gt;\n&lt;&lt;if $fighter.y lt 3&gt;&gt;\n&lt;&lt;set $fighter.y = $fighter.y  + 1&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $fighter&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;&lt;&lt;display Control Panel&gt;&gt;</div><div tiddler="Control Panel" tags="moon" created="201412051828" modifier="twee" twine-position="664,1064">&lt;&lt;nobr&gt;&gt;\n&lt;div id=&quot;bg-test&quot; style=&quot;background-image:[img[stars-bg]]; background-position:bottom;height:250px;width:310px;background-repeat: repeat-x;&quot;&gt;\n&lt;&lt;print $map[0][0].display&gt;&gt; &lt;&lt;print $map[0][1].display&gt;&gt; &lt;&lt;print $map[0][2].display&gt;&gt; &lt;&lt;print $map[0][3].display&gt;&gt; &lt;&lt;print $map[0][4].display&gt;&gt;&lt;br&gt;\n&lt;&lt;print $map[1][0].display&gt;&gt; &lt;&lt;print $map[1][1].display&gt;&gt; &lt;&lt;print $map[1][2].display&gt;&gt; &lt;&lt;print $map[1][3].display&gt;&gt; &lt;&lt;print $map[1][4].display&gt;&gt;&lt;br&gt;\n&lt;&lt;print $map[2][0].display&gt;&gt; &lt;&lt;print $map[2][1].display&gt;&gt; &lt;&lt;print $map[2][2].display&gt;&gt; &lt;&lt;print $map[2][3].display&gt;&gt; &lt;&lt;print $map[2][4].display&gt;&gt;&lt;br&gt;   \n&lt;&lt;print $map[3][0].display&gt;&gt; &lt;&lt;print $map[3][1].display&gt;&gt;&lt;&lt;print $map[3][2].display&gt;&gt; &lt;&lt;print $map[3][3].display&gt;&gt; &lt;&lt;print $map[3][4].display&gt;&gt;&lt;/div&gt;\n/%Begin Control Panel%/\n&lt;table&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;[[&amp;#11014;|Starfighter Up]]&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td&gt;[[&amp;#11013;|Starfighter Left]]&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;[[&amp;#10145;|Starfighter Right]]&lt;/td&gt;\n&lt;/tr&gt;&lt;tr&gt;\n&lt;td&gt;&lt;/td&gt;&lt;td&gt;[[&amp;#11015;|Starfighter Down]]&lt;/td&gt;&lt;td&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;&lt;td colspan=3&gt;Fighter Coords: &lt;&lt;print $fighter.x&gt;&gt;,&lt;&lt;print $fighter.y&gt;&gt;&lt;td&gt;&lt;/tr&gt;\n&lt;/table&gt; \n/%End Control Panel%/\n&lt;&lt;endnobr&gt;&gt;</div><div tiddler="Office Happen" tags="" created="201412091254" modifier="twee" twine-position="1099,1233">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;set $officeHappen = (Math.floor(Math.random() * $officeEventGrid.length) + 1) - 1&gt;&gt;\n&lt;&lt;print $officeEventGrid[$officeHappen][0]&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;\n[[Work|Office]]\n&lt;&lt;print $officeEventGrid&gt;&gt;\n&lt;&lt;set $officeEventGrid.splice($officeHappen,1)&gt;&gt;\n&lt;&lt;print $officeEventGrid&gt;&gt;\n&lt;&lt;print $officeEventGrid.length&gt;&gt;</div><div tiddler="Samizdat Init" tags="moon" created="201412130003" modifier="twee" twine-position="2348,921">&lt;&lt;set //initialize\n$novel = [\n'&quot;Known Only to the Wind&quot; is about the Caruthers family, a wealthy and decadent gaggle of profiteers as they are punished in new and awful ways for their greed and transgression of American Puritanical morality.&lt;br&gt;For example, the part you\s're in now has Lucian Caruthers, the family patriarch, tormented by his secret love for another man, Bradley Duke. Bradley has just confronted Lucian\s's wife at something called a &quot;fundraiser ball.&quot; He throws white wine (an kind of of alcohol made from grapes) in her face to show his contempt for her and she slaps him across the face. Now Lucian has denied his lover\s's allegations and thrown himself into the palatial bedroom.',\n'you ever leave me again,&quot; Jaqueline said.&lt;br&gt;Lucian rolled away from the door and said nothing. Then he said nothing again.&lt;br&gt;In a fury, Jaqueline slammed the tray on the dresser with an clatter and returned to the party downstairs.&lt;br&gt;&quot;I can\s't remember who I wanted to be,&quot; Lucian whispered to the wall. There was no sadness where he expected sadness ought to be. Then he thought of Bradley and his eyes grew wet, but not only from loss.&lt;br&gt;He reached his hand out at the wall, and let his fingers explore the dusky light. His arm\s's weight felt entirely new to him.&lt;br&gt;',\n'This is the next sentence of the novel.'\n]\n\n$sentence = 0\n&gt;&gt;</div><div tiddler="Starfighter Up" tags="earth" created="201411191447" modifier="twee" twine-position="484,715">&lt;&lt;nobr&gt;&gt;&lt;&lt;set $map = [[$slot1, $slot2, $slot3, $slot4, $slot5],\n\t\t[$slot6, $slot7, $slot8, $slot9, $slot10],\n\t\t[$slot11, $slot12, $slot13, $slot14, $slot15],\n\t\t[$slot16, $slot17, $slot18, $slot19, $slot20]\n\t\t]&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $space&gt;&gt;\n&lt;&lt;if $fighter.y gt 0&gt;&gt;\n&lt;&lt;set $fighter.y = $fighter.y - 1&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;set $map[$fighter.y][$fighter.x] = $fighter&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;&lt;&lt;display Control Panel&gt;&gt;</div><div tiddler="lunarsurface" tags="Twine.image" created="201411241603" modifier="twee" twine-position="544,5">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAAVCAIAAADn1y9EAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAANhJREFUeNrs2LEJwlAQANB8cQEnMZDWxgkE57B1CncRrC1sbDOCK+gEATuxEZSfM8b/XpUqP7l/HHeX5nVdAYzBVAjgv+3bxeN53ZxH/S8T1wkoWAAKFlCqZOke59TuQt+/bLaCLB+KygcdFqBgAShYQLHStTsOcvCreTtizs+Z7fv6nlt16OU9s2pVbLJ+eo/RO6PS8uE5/kPFVocFGAkBFCygWOnSbUIPyJmxc+b8iNm+r70Dv58/vB//b8ZZhwUYCQEULKBY4TssAB0WoGABKFgAme4CDACaBSl4ADLmYQAAAABJRU5ErkJggg==</div><div tiddler="Population Growth" tags="moon" created="201411281519" modifier="twee" twine-position="1586,1070">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $season % 4 == 0&gt;&gt;\nA new ship of colonists arrives.\n&lt;&lt;set $colonyPop = $colonyPop + 20&gt;&gt; \n&lt;&lt;display Need Increase&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;</div><div tiddler="Economy Debug" tags="moon" created="201411181550" modifier="twee" twine-position="1953,1145">&lt;div style=&quot;width: 300px; float:left; color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em&quot;&gt;&lt;&lt;display Price Update&gt;&gt;&lt;&lt;set $cropsDisplay = $allCrops.length -1 &gt;&gt;\n/%&lt;&lt;display Display Crops&gt;&gt;\n\n% = &lt;&lt;print $cotton.inStore / $cotton.need&gt;&gt;\nCurve Model\n--------------\ny = &lt;&lt;print Math.pow(($cotton.inStore / $cotton.need - 1),2)&gt;&gt;%/\n&lt;&lt;if $playerCrops.crop eq 'Cotton'&gt;&gt;Cotton Price = &lt;&lt;print $cotton.pricePerUnit &gt;&gt;&lt;br&gt;&lt;&lt;set $profit = $cotton.pricePerUnit  * $cotton.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Wheat'&gt;&gt;Wheat Price = &lt;&lt;print $wheat.pricePerUnit &gt;&gt;&lt;&lt;set $profit = $wheat.pricePerUnit  * $wheat.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $playerCrops.crop eq 'Cannabis'&gt;&gt;Cannabis Price = &lt;&lt;print $cannabis.pricePerUnit &gt;&gt;&lt;&lt;set $profit = $cannabis.pricePerUnit  * $cannabis.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $playerCrops.crop eq 'Coffee'&gt;&gt;Coffee Price = &lt;&lt;print $cannabis.pricePerUnit &gt;&gt;&lt;&lt;set $profit = $cannabis.pricePerUnit  * $cannabis.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;\n&lt;&lt;if $playerCrops.crop eq 'Soybeans'&gt;&gt;Soybeans Price = &lt;&lt;print $cannabis.pricePerUnit &gt;&gt;&lt;&lt;set $profit = $cannabis.pricePerUnit  * $cannabis.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;\n/%\nLinear Model\n--------------\ny = &lt;&lt;print (0-$cotton.inStore/$cotton.need)+1&gt;&gt;\nMaxPrice = &lt;&lt;set $linearPrice = 100 + Math.floor(100*(0-$cotton.inStore/$cotton.need)+1)&gt;&gt;&lt;&lt;print $linearPrice&gt;&gt;\n%/\nYou Have\n--------------\nOn Hand = &lt;&lt;if $playerCrops.crop eq 'Cotton'&gt;&gt;&lt;&lt;print $cotton.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Wheat'&gt;&gt;&lt;&lt;print $wheat.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Cannabis'&gt;&gt;&lt;&lt;print $cannabis.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Coffee'&gt;&gt;&lt;&lt;print $coffee.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;&lt;&lt;if $playerCrops.crop eq 'Soybeans'&gt;&gt;&lt;&lt;print $beans.onHand&gt;&gt;&lt;&lt;endif&gt;&gt;\n$ = &lt;&lt;print $player1.cash&gt;&gt;\n[[Sell]]\n[[Buy|Store]]\n&lt;/div&gt;\n&lt;div style=&quot;width: 300px; float:left;background:black;color: #106629; font-family: Terminal, Courier; font-weight: bold; font-size: 0.8em; line-height: 1.0em;&quot;&gt;\n&lt;&lt;display Debug&gt;&gt;\n&lt;/div&gt;</div><div tiddler="StoryAuthor" tags="" created="201411161312" modifier="twee" twine-position="10,290">Press X to Comfort</div><div tiddler="Parent Success" tags="" created="201412081530" modifier="twee" twine-position="305,1513"></div><div tiddler="Bar Grow" tags="earth" created="201412081633" modifier="twee" twine-position="633,1239">&lt;&lt;nobr&gt;&gt;\n&lt;&lt;if $starter eq $temp&gt;&gt;\n&lt;&lt;else&gt;&gt;\n&lt;&lt;set $anxiety_bar[$starter] = '[img[AnxietyMeter]]'&gt;&gt;\n&lt;&lt;set $starter = $starter + 1&gt;&gt;\n&lt;&lt;display Bar Grow&gt;&gt;\n&lt;&lt;endif&gt;&gt;\n&lt;&lt;endnobr&gt;&gt;</div><div tiddler="starfield" tags="Twine.image" created="201411191359" modifier="twee" twine-position="877,598">data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAF1JREFUeNrs0sEJwCAQBEAT/KYWr4SUnhLsJQ349SshIjL7u88xsHuUiLRezrRksLCwsLCwsLCwsLCwsLCwsGYk//f6fWp/XncoEWvryQ9tXIlYWFhYWFhYn9MEGADyvgR0ZwnUNQAAAABJRU5ErkJggg==</div></div></body></html>
